{"version":3,"file":"index.js","sources":["../src/utility.js","../src/SlideshowLightbox.tsx","../src/AnimImage.tsx","../src/index.tsx"],"sourcesContent":["import { useState, useCallback, useEffect, useRef } from \"react\";\r\n\r\nexport const wrapNums = (minNum, maxNum, v) => {\r\n      if (minNum == maxNum) {\r\n        return minNum;\r\n      }\r\n      let rangeSize = maxNum - minNum;\r\n      return ((((v - minNum) % rangeSize) + rangeSize) % rangeSize) + minNum;\r\n};\r\n\r\nexport const shouldAutoplay = (elem) => {\r\n  // Autoplay for HTML5 Video elems set to true by default\r\n  // Autoplay is off by default for YouTube embeds\r\n\r\n  if (elem.type == 'yt' && elem.autoPlay != true && elem.autoPlay != 'true') {\r\n    return false\r\n  } else if (elem.autoPlay == false || elem.autoPlay == 'false') {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nexport const getVideoHeight = (elem) => {\r\n  if (elem.videoHeight) {\r\n    return elem.videoHeight\r\n  }\r\n  return \"200\"\r\n}\r\n\r\nexport const getVideoWidth = (elem) => {\r\n  if (elem.videoWidth) {\r\n    return elem.videoWidth\r\n  }\r\n  return \"900\"\r\n}\r\n\r\nexport const useInterval = (callback, timeDelay) => {\r\n      const savedCallbackRef = useRef();\r\n    \r\n      useEffect(() => {\r\n        savedCallbackRef.current = callback;\r\n      }, [callback]);\r\n    \r\n      useEffect(() => {\r\n        function tick() {\r\n          savedCallbackRef.current();\r\n        }\r\n        if (timeDelay !== null) {\r\n          // Set the interval\r\n          let intervalID = setInterval(tick, timeDelay);\r\n\r\n          // Remove the interval\r\n          return () => clearInterval(intervalID);\r\n        }\r\n      }, [timeDelay]);\r\n}\r\n\r\nexport const openFullScreen = (lightbox_elem) => {\r\n  if (lightbox_elem.requestFullscreen) {\r\n    lightbox_elem.requestFullscreen();\r\n  } \r\n\r\n  /* Safari */\r\n  else if (lightbox_elem.webkitRequestFullscreen) { \r\n    lightbox_elem.webkitRequestFullscreen();\r\n  } \r\n  \r\n  /* Internet Explorer */\r\n  else if (lightbox_elem.msRequestFullscreen) { \r\n    lightbox_elem.msRequestFullscreen();\r\n  }\r\n}\r\n\r\nexport const closeFullScreen = (document) => {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } \r\n\r\n  /* Safari */\r\n  else if (document.webkitExitFullscreen) { \r\n    document.webkitExitFullscreen();\r\n  } \r\n  \r\n  /* Internet Explorer */\r\n  else if (document.msExitFullscreen) { \r\n    document.msExitFullscreen();\r\n  }\r\n}\r\n\r\nexport const swipePower = (offset, velocity) => {\r\n    return Math.abs(offset) * velocity;\r\n};\r\n\r\nexport const getScale = (num, maxScale) => {\r\n  if (num < 1) {\r\n    return 1\r\n  }\r\n  else if (num > maxScale) {\r\n    return maxScale;\r\n  }\r\n  \r\n  return num;\r\n  \r\n}","import * as React from 'react'\r\nimport { useState, useEffect, useRef, useCallback, forwardRef, useImperativeHandle, ForwardRefExoticComponent } from 'react'\r\nimport { motion, AnimatePresence, AnimateSharedLayout, useIsPresent } from 'framer-motion'\r\nimport styles from './styles.module.css'\r\n\r\nimport {\r\n  wrapNums,\r\n  getVideoHeight,\r\n  getVideoWidth,\r\n  shouldAutoplay,\r\n  getScale,\r\n} from './utility'\r\nimport {\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Fullscreen,\r\n  PlayCircleFill,\r\n  Search,\r\n  Download,\r\n  PauseCircleFill,\r\n  FullscreenExit,\r\n  InfoCircle,\r\n  XLg,\r\n  GridFill\r\n} from 'react-bootstrap-icons'\r\nimport { ReactNode } from 'react';\r\nimport Magnifier from 'react-magnifier'\r\nimport { Portal } from 'react-portal'\r\nimport { TransformWrapper, TransformComponent, ReactZoomPanPinchRef, } from 'react-zoom-pan-pinch'\r\nimport { saveAs } from 'file-saver'\r\nimport Div100vh from 'react-div-100vh'\r\nimport KeyHandler from 'react-key-handler'\r\nimport { useInterval } from 'usehooks-ts'\r\nimport useEmblaCarousel from 'embla-carousel-react'\r\nimport YouTube from 'react-youtube';\r\nimport useResizeObserver from '@react-hook/resize-observer';\r\nimport exifr from 'exifr'\r\n\r\nlet thumbnailVariants: any = {\r\n  visible: { opacity: 1, y: 0 },\r\n  hidden: { opacity: 0, y: 100 }\r\n}\r\n\r\nconst themes: any = {\r\n  day: {\r\n    background: 'white',\r\n    iconColor: 'black',\r\n    thumbnailBorder: 'solid transparent 2px',\r\n    textColor: 'black',\r\n    metadataTextColor: \"black\"\r\n  },\r\n  night: {\r\n    background: '#151515',\r\n    iconColor: '#626b77',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206)  2px',\r\n    textColor: 'silver',\r\n    metadataTextColor: \"white\"\r\n\r\n  },\r\n  lightbox: {\r\n    background: 'rgba(12, 12, 12, 0.93)',\r\n    iconColor: '#626b77',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206) 2px',\r\n    textColor: 'silver',\r\n    metadataTextColor: \"white\"\r\n\r\n  }\r\n}\r\n\r\n// const activeThumbnailBorder = 'solid rgba(107, 133, 206, 0.6) 2px'\r\nconst inactiveThumbnailBorder = 'solid transparent 2px'\r\n\r\nconst defaultTheme = 'night'\r\nconst mobileWidth = 768\r\n\r\nconst usePrevious = (value) => {\r\n  // custom hook to get previous prop value\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  });\r\n\r\n  return ref.current;\r\n}\r\n\r\ninterface SlideItem {\r\n  src?: any,\r\n  original?: string,\r\n  type?: string,\r\n  alt?: string,\r\n  loaded?: boolean,\r\n  thumbnailSrc?: string,\r\n}\r\n\r\ninterface ImageElement {\r\n  src?: any,\r\n  alt?: string,\r\n  loaded?: boolean,\r\n}\r\n\r\ntype SlideshowLightboxHandle = {\r\n  children?: ReactNode;\r\n  reset: () => void;\r\n};\r\n\r\nexport interface SlideshowLightboxProps {\r\n  children?: ReactNode;\r\n  ref?: any;\r\n  thumbnailBorder?: string;\r\n  magnifyingGlass?: boolean;\r\n  backgroundColor?: string;\r\n  theme?: string;\r\n  iconColor?: any;\r\n  fullScreen?: boolean;\r\n  showControls?: boolean;\r\n  disableImageZoom?: boolean;\r\n  slideshowInterval?: number;\r\n  slideDuration?: number;\r\n  lightboxWidth?: string;\r\n  showThumbnails?: boolean;\r\n  open?: boolean;\r\n  displayMetadata?: boolean;\r\n  noWindow?: boolean;\r\n  navigationDots?: boolean;\r\n  animateThumbnails?: boolean;\r\n  queryElems?: any;\r\n  showFullScreenIcon?: boolean;\r\n  showThumbnailIcon?: boolean;\r\n  showSlideshowIcon?: boolean;\r\n  showMagnificationIcons?: boolean;\r\n  roundedImages?: boolean;\r\n  downloadImages?: boolean;\r\n  showNavigationDots?: boolean;\r\n  rtl?: boolean;\r\n  modalClose?: string;\r\n  framework?: string;\r\n  lightboxIdentifier?: string;\r\n  nextArrow?: any;\r\n  prevArrow?: any;\r\n  arrowStyle?: any;\r\n  showLoader?: boolean;\r\n  useCoverMode?: boolean;\r\n  rightArrowStyle?: any;\r\n  leftArrowStyle?: any;\r\n  imgAnimation?: string;\r\n  maxZoomScale?: number;\r\n  textColor?: string;\r\n  licenseKey?: string;\r\n  images?: any;\r\n  render?: any;\r\n  imageComponent?: boolean;\r\n  imgElemClassname?: string;\r\n  showArrows?: boolean;\r\n  showControlsBar?: boolean;\r\n  rightSidebarComponent?: any;\r\n  closeIconBtnStyle?: any;\r\n  controlComponent?: any;\r\n  lightboxImgClass?: string;\r\n  thumbnailImgClass?: string;\r\n  coverImageInLightbox?: boolean;\r\n  onOpen?: any;\r\n  onClose?: any;\r\n  onNext?: any;\r\n  onPrev?: any;\r\n  onSelect?: any;\r\n  onThumbnailClick?: any;\r\n  onImgError?: any;\r\n  className?: string;\r\n  imgWrapperClassName?: string;\r\n  imgClassName?: string;\r\n  startingSlideIndex?: number;\r\n  showAllImages?: any;\r\n  rightArrowClassname?: string;\r\n  leftArrowClassname?: string;\r\n  displayedImages?: any;\r\n  metadataTimeLocale?: string;\r\n  captionStyle?: any;\r\n}\r\n\r\nexport const SlideshowLightbox: React.FC<SlideshowLightboxProps> = React.forwardRef<SlideshowLightboxHandle, SlideshowLightboxProps>((props, ref) => {\r\n\r\n  useImperativeHandle(\r\n    ref,\r\n    () => ({\r\n      reset() {\r\n        initImages(true, true)\r\n      }\r\n    })\r\n  )\r\n\r\n  const [[imgSlideIndex, direction], setImgSlideIndex] = useState([0, 0])\r\n  const [showModal, setShowModal] = useState(false)\r\n  const [slideAnimDuration, setSlideAnimDuration] = useState(props.slideDuration ? props.slideDuration : 25)\r\n\r\n  const [isSlideshowPlaying, setIsSlideshowPlaying] = useState(false)\r\n\r\n  const [emblaReinitialized, setEmblaReinitialized] = useState(false)\r\n\r\n  const [images, setImages] = useState<SlideItem[]>([]);\r\n\r\n  const [previewImageElems, setPreviewImageElems] = useState<any[]>([]);\r\n\r\n  const slideIndex = wrapNums(0, images.length, imgSlideIndex)\r\n\r\n  const [reactSwipeOptions, setReactSwipeOptions] = useState({\r\n    loop: true,\r\n    startIndex: 0,\r\n    active: true,\r\n    duration: slideAnimDuration,\r\n    dragThreshold: 10,\r\n    skipSnaps: true\r\n  })\r\n\r\n  let initialThumbnailOptions: any = {\r\n    startIndex: 0,\r\n    containScroll: 'keepSnaps',\r\n    dragFree: true\r\n  }\r\n\r\n  const [width, setWidth] = useState(0)\r\n\r\n  const isMobile = width <= mobileWidth;\r\n\r\n  const [thumbnailSwipeOptions, setThumbnailSwipeOptions] = useState(initialThumbnailOptions)\r\n\r\n  const [carouselReady, setCarouselReady] = useState(false)\r\n\r\n  const [zoomedIn, setZoomedIn] = useState(false)\r\n\r\n  const [isDisplay, setIsDisplay] = useState(false)\r\n\r\n  const [isOpen, setIsOpen] = useState(false)\r\n\r\n  const [prevFocusedElem, setPrevFocusedElem] = useState<HTMLElement | null>(null)\r\n  const [animationEntered, setAnimationEntered] = useState(false)\r\n\r\n  const [lightboxModalWidth, setLightboxModalWidth] = useState(\r\n    props.lightboxWidth ? props.lightboxWidth : \"100vw\"\r\n  )\r\n\r\n  const [rightSidebarComponent, setRightSidebarComponent] = useState(\r\n    props.rightSidebarComponent ? props.rightSidebarComponent : null\r\n  )\r\n\r\n  const [magnifyingGlassFeature, _setMagnifyingGlassFeature] = useState(\r\n    props.magnifyingGlass ? props.magnifyingGlass : false\r\n  )\r\n\r\n  const [disableZoom, setDisableZoom] = useState(\r\n    props.disableImageZoom ? props.disableImageZoom : false\r\n  )\r\n\r\n  const [slideshowInterval, setSlideshowInterval] = useState(\r\n    props.slideshowInterval ? props.slideshowInterval : 1700\r\n  )\r\n\r\n  const [rightArrowStyle, setRightArrowStyle] = useState(\r\n    props.rightArrowStyle ? props.rightArrowStyle : {}\r\n  )\r\n\r\n  const [leftArrowStyle, setLeftArrowStyle] = useState(\r\n    props.leftArrowStyle ? props.leftArrowStyle : {}\r\n  )\r\n\r\n  const [maxScale, setMaxScale] = useState<number>(\r\n    props.maxZoomScale ? getScale(props.maxZoomScale, 24) : 8\r\n  )\r\n\r\n  const [isRounded, setIsRounded] = useState(\r\n    props.roundedImages ? props.roundedImages : false\r\n  )\r\n\r\n  const [showControls, setShowControls] = useState<boolean>(\r\n    props.showControls ? props.showControls : true\r\n  )\r\n\r\n  const [displayFullScreenIcon, setDisplayFullScreenIcon] = useState<boolean>(\r\n    props.showFullScreenIcon ? props.showFullScreenIcon : true\r\n  )\r\n\r\n  const [displayThumbnailIcon, setDisplayThumbnailIcon] = useState<boolean>(\r\n    props.showThumbnailIcon ? props.showThumbnailIcon : true\r\n  )\r\n\r\n  const [displaySlideshowIcon, setDisplaySlideshowIcon] = useState<boolean>(\r\n    props.showSlideshowIcon ? props.showSlideshowIcon : true\r\n  )\r\n\r\n  const [displayMagnificationIcons, setDisplayMagnificationIcons] = useState<boolean>(\r\n    props.showMagnificationIcons ? props.showMagnificationIcons : true\r\n  )\r\n\r\n  const [nextArrowElem, setNextArrowElem] = useState(\r\n    props.nextArrow ? props.nextArrow : null\r\n  )\r\n\r\n  const [isImageComponent, setImageComponent] = useState(\r\n    props.imageComponent ? props.imageComponent : null\r\n  )\r\n\r\n  const [prevArrowElem, setPrevArrowElem] = useState(\r\n    props.prevArrow ? props.prevArrow : null\r\n  )\r\n\r\n  const [modalCloseOption, setModalCloseOption] = useState(\r\n    props.modalClose ? props.modalClose : \"default\"\r\n  )\r\n\r\n  const [showDownloadBtn, setShowDownloadBtn] = useState(\r\n    props.downloadImages ? props.downloadImages : false\r\n  )\r\n\r\n  const [navigationDots, setNavigationDots] = useState(\r\n    props.showNavigationDots ? props.showNavigationDots : false\r\n  )\r\n\r\n  const [metadataLocale, setMetadataLocale] = useState(props.metadataTimeLocale ? props.metadataTimeLocale : \"en-US\")\r\n\r\n  const [isRTL, setIsRTL] = useState(props.rtl ? props.rtl : false)\r\n\r\n  const [frameworkID, setFrameworkID] = useState(\r\n    props.framework ? props.framework : ''\r\n  )\r\n  const [lightboxIdentifier, setLightboxIdentifier] = useState(\r\n    props.lightboxIdentifier ? props.lightboxIdentifier : false\r\n  )\r\n  const [imageFullScreen, setImageFullScreen] = useState(\r\n    props.fullScreen ? props.fullScreen : false\r\n  )\r\n  const [licenseKey, setLicenseKey] = useState(\r\n    props.licenseKey ? props.licenseKey : ''\r\n  )\r\n\r\n  const [displayLoader, setDisplayLoader] = useState(\r\n    props.showLoader ? props.showLoader : false\r\n  )\r\n\r\n  const [customControlComponent, setCustomControlComponent] = useState(\r\n    props.controlComponent ? props.controlComponent : false\r\n  )\r\n\r\n  const [startingIndex, setStartingIndex] = useState(\r\n    props.startingSlideIndex ? props.startingSlideIndex : 0\r\n  )\r\n\r\n  // Styling/theming\r\n  const [backgroundColor, setBackgroundColor] = useState(\r\n    props.backgroundColor\r\n      ? props.backgroundColor\r\n      : themes[defaultTheme].background\r\n  )\r\n  const [iconColor, setIconColor] = useState(\r\n    props.iconColor ? props.iconColor : null\r\n  )\r\n  const [textColor, setTextColor] = useState(\r\n    props.textColor ? props.textColor : themes[defaultTheme].textColor\r\n  )\r\n  const [showControlsBar, setShowControlsBar] = useState(\r\n    props.showControlsBar ? props.showControlsBar : true\r\n  )\r\n\r\n  const [coverMode, setCoverMode] = useState(\r\n    props.useCoverMode ? props.useCoverMode : false\r\n  )\r\n\r\n  const [displayImgMetadata, setDisplayImgMetadata] = useState(\r\n    props.displayMetadata ? props.displayMetadata : false\r\n  )\r\n\r\n  const [showImgMetadataPanel, setShowImgMetadataPanel] = useState(false)\r\n\r\n  const [imgMetadata, setImgMetadata] = useState({})\r\n\r\n  const [showThumbnails, setShowThumbnails] = useState(\r\n    props.showThumbnails ? props.showThumbnails : false\r\n  )\r\n  const [animatedThumbnails, setAnimatedThumbnails] = useState(\r\n    props.animateThumbnails ? props.animateThumbnails : true\r\n  )\r\n  const [imgAnimation, setImgAnimation] = useState(\r\n    props.imgAnimation ? props.imgAnimation : 'imgDrag'\r\n  )\r\n  const [arrowStyle, setArrowStyle] = useState(\r\n    props.arrowStyle ? props.arrowStyle : 'dark'\r\n  )\r\n\r\n  const [YTVideoCurrentlyPlaying, setYTVideoCurrentlyPlaying] = useState(false)\r\n\r\n\r\n  const [isBrowserFullScreen, setIsBrowserFullScreen] = useState(false)\r\n  const [enableMagnifyingGlass, setMagnifyingGlass] = useState(false)\r\n  const [imagesLoaded, setImagesLoaded] = useState(false)\r\n\r\n  const imageRef: React.RefObject<HTMLImageElement> = useRef(null)\r\n\r\n  const [zoomIdx, setZoomIdx] = useState(0)\r\n\r\n  const [imgContainHeight, setImgContainHeight] = useState(500)\r\n  const [imgContainWidth, setImgContainWidth] = useState(426)\r\n  const [isInit, setIsInit] = useState(false)\r\n\r\n  const { open } = props;\r\n  const previousValues: any = usePrevious({ open });\r\n\r\n  // Refs\r\n  const zoomReferences = useRef<(ReactZoomPanPinchRef | null)[]>([])\r\n  const videoReferences = useRef({})\r\n  const btnRef = useRef(null)\r\n  const [videoElements, setVideoElements] = useState({});\r\n\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [noWindow, setNoWindow] = useState(props.noWindow ? props.noWindow : false)\r\n\r\n  \r\n  const [touchStart, setTouchStart] = useState<any>(0)\r\n  const [touchEnd, setTouchEnd] = useState<any>(0)\r\n\r\n  const [mouseStartX, setMouseStartX] = useState<any>(0)\r\n  const [mouseStartY, setMouseStartY] = useState<any>(0)\r\n\r\n  const minimumSwipeDistance = 50 \r\n\r\n  const onTouchStart = (e) => {\r\n    setTouchEnd(null)\r\n    setTouchStart(e.targetTouches[0].clientX)\r\n  }\r\n\r\n  const onTouchMove = (e) => setTouchEnd(e.targetTouches[0].clientX)\r\n\r\n  const onTouchEnd = () => {\r\n    // only move to new image if imgAnimation set to \"fade\"\r\n    if (touchStart != null && touchEnd != null && imgAnimation == \"fade\") {\r\n      const distance: any = touchStart - touchEnd\r\n      if (distance != null) {\r\n        const isLeftSwipe = distance > minimumSwipeDistance\r\n        const isRightSwipe = distance < -minimumSwipeDistance\r\n        if (isLeftSwipe) {\r\n          nextSlide()\r\n        }\r\n        else if (isRightSwipe) {\r\n          prevSlide();\r\n        } \r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const delta = 6;\r\n\r\n  const onMouseDown = (event) => {\r\n    setMouseStartX(event.pageX)\r\n    setMouseStartY(event.pageY)\r\n  }\r\n\r\n  const onMouseUp = (event) => {\r\n\r\n    if (imgAnimation == \"fade\" && zoomedIn == false) {\r\n      const differenceX = Math.abs(event.pageX - mouseStartX);\r\n    \r\n      if (differenceX > delta) {\r\n        const isLeftDragMotion = (mouseStartX - event.pageX) > delta;\r\n        const isRightDragMotion = (mouseStartX - event.pageX) < -delta;\r\n        \r\n        if (isLeftDragMotion) {\r\n          nextSlide();\r\n        }\r\n        else if (isRightDragMotion) {\r\n          prevSlide()\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const createCustomThumbnailBorder = (): string | void => {\r\n    if (props.thumbnailBorder) {\r\n      return `solid ${props.thumbnailBorder} 2px`\r\n    }\r\n  }\r\n\r\n  const [thumbnailBorder, setThumbnailBorder] = useState(\r\n    props.thumbnailBorder\r\n      ? createCustomThumbnailBorder()\r\n      : themes[defaultTheme].thumbnailBorder\r\n  )\r\n\r\n  const [emblaRef, emblaApi] = useEmblaCarousel(reactSwipeOptions);\r\n  const [emblaThumbsRef, emblaThumbsApi] = useEmblaCarousel(thumbnailSwipeOptions)\r\n\r\n  const getLoaderThemeClass = () => {\r\n    if (props.theme) {\r\n      if (props.theme == 'night' || props.theme == 'lightbox') {\r\n        return styles.night_loader\r\n      } else if (props.theme == 'day') {\r\n        return styles.day_loader\r\n      }\r\n    }\r\n    return styles.night_loader\r\n  }\r\n\r\n  const scrollPrev = useCallback(() => {\r\n    if (emblaApi) { emblaApi.scrollPrev();\r\n    }\r\n\r\n  }, [emblaApi])\r\n\r\n  const scrollNext = useCallback(() => {\r\n    if (emblaApi) {\r\n      emblaApi.scrollNext() \r\n\r\n    }\r\n  }, [emblaApi])\r\n\r\n  const variants = {\r\n    active: {\r\n      opacity: 1,\r\n    },\r\n    inactive: {\r\n      opacity: 0,\r\n    }\r\n  }\r\n\r\n  const isImageCaption = () => {\r\n    if (props.images && props.images.length > 0) {\r\n      if (props.images[slideIndex]?.caption) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  const displayDownloadBtn = () => {\r\n    if (isVideo(slideIndex)) {\r\n      return false\r\n    } else {\r\n      return showDownloadBtn\r\n    }\r\n  }\r\n\r\n  function handleWindowResize() {\r\n    if (!noWindow) {\r\n      setWidth(window.innerWidth)\r\n    }\r\n  }\r\n\r\n  const shouldDisplayMagnifyingGlassIcon = () => {\r\n    if (isVideo(slideIndex)) {\r\n      return false\r\n    }\r\n    if (isMobile == true) {\r\n      return false\r\n    }\r\n    if (imageFullScreen == true) {\r\n      return false\r\n    }\r\n\r\n    if (magnifyingGlassFeature == true) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  const getImageStyle = () => {\r\n    let styleObject = {};\r\n    if (isImageCaption() && showThumbnails == false) {\r\n      styleObject[\"height\"] = \"77vh\"\r\n    }\r\n    if (isImageCaption() && showThumbnails) {\r\n      styleObject[\"height\"] = \"67vh\"\r\n    }\r\n    if (isRounded) {\r\n      styleObject[\"borderRadius\"] = \"20px\";\r\n    }\r\n    if (modalCloseOption == \"clickOutside\") {\r\n      styleObject[\"pointerEvents\"] = \"auto\"\r\n    }\r\n    if (isImageComponent && showThumbnails == false && !isMobile) {\r\n      styleObject[\"height\"] = \"85vh\";\r\n    }\r\n    return styleObject;\r\n  }\r\n\r\n  const shouldDisplaySlideshowIcon = () => {\r\n\r\n    if (props.showSlideshowIcon != undefined) {\r\n      return props.showSlideshowIcon;\r\n    }\r\n\r\n    if (images) {\r\n      if (images.length == 1) {\r\n        return false;\r\n      }\r\n    }\r\n    else if (props.images) {\r\n      if (props.images.length == 1) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  const navigationClick = (index) => {\r\n    initLoader(index)\r\n    setCurrentSlide(index)\r\n  }\r\n\r\n  const checkModalClick = (e) => {\r\n    const modals = document.getElementsByClassName('imageModal')\r\n    let arr_modals = Array.from(modals)\r\n    for (let i = 0; i < arr_modals.length; i++) {\r\n      let elem = arr_modals[i]\r\n      let clickInside = elem.contains(e.target);\r\n\r\n      if (clickInside) {\r\n        return\r\n      }\r\n    }\r\n\r\n    closeModal()\r\n  }\r\n\r\n  const isZoomEnabled = () => {\r\n    if (disableZoom == true) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const getRTLIndex = (img_gallery_length, i) => {\r\n    let index\r\n    if (i == 0) {\r\n      index = img_gallery_length - 1\r\n    } else if (i == img_gallery_length - 1) {\r\n      index = 0\r\n    } else {\r\n      index = img_gallery_length - i - 1\r\n    }\r\n    return index\r\n  }\r\n\r\n  const getMetadataTextColor = () => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        return themes[props.theme].metadataTextColor;\r\n      }\r\n    }\r\n    else {\r\n      return themes[defaultTheme].metadataTextColor;\r\n    }\r\n  }\r\n\r\n  const fullScreen = () => {\r\n    let lightbox = document.getElementById('slideshowAnim')\r\n    openFullScreen(lightbox)\r\n    setIsBrowserFullScreen(true)\r\n    initFullScreenChangeEventListeners()\r\n  }\r\n\r\n  const exitFullScreenHandler = () => {\r\n    //in full screen mode\r\n    if (\r\n      document['webkitIsFullScreen'] ||\r\n      document['mozFullScreen'] ||\r\n      document['msFullscreenElement']\r\n    ) {\r\n      setIsBrowserFullScreen(true)\r\n    } else {\r\n      if (isBrowserFullScreen) {\r\n        closeFullScreen(document)\r\n      }\r\n      removeFullScreenChangeEventListeners()\r\n      setIsBrowserFullScreen(false)\r\n    }\r\n  }\r\n\r\n  const exitFullScreen = () => {\r\n    closeFullScreen(document)\r\n    removeFullScreenChangeEventListeners()\r\n    setIsBrowserFullScreen(false)\r\n  }\r\n\r\n  const emblaSlideSelect = useCallback((emblaApi) => {    \r\n  }, [])\r\n\r\n  useEffect(() => {    \r\n    if (emblaApi) emblaApi.on('slidesInView', emblaSlideSelect)  }, \r\n  [emblaApi, emblaSlideSelect])\r\n\r\n\r\n  const updateImageSlideshow = (newDirection) => {\r\n    if (isRTL) {\r\n      scrollPrev()\r\n    } else {\r\n      scrollNext();\r\n    }\r\n\r\n    setImgSlideIndex([imgSlideIndex + newDirection, newDirection])\r\n    if (isRTL) {\r\n      setZoomIdx(zoomIdx - 1 < 0 ? images.length - 1 : zoomIdx - 1)\r\n    } else {\r\n      setZoomIdx(zoomIdx + 1 >= images.length ? 0 : zoomIdx + 1)\r\n    }\r\n  }\r\n\r\n  const displayArrows = () => {\r\n    if (props.showArrows == false) {\r\n      return false;\r\n    }\r\n    if (props.images) {\r\n      if (props.images.length == 1) {\r\n        return false;\r\n      }\r\n    }\r\n    else if (images.length == 1) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  const initLoader = (newIndex) => {\r\n    if (props.showLoader && props.images) {\r\n      if (!isVideo(newIndex) && images[newIndex].loaded != true) {\r\n        setDisplayLoader(true)\r\n      } else if (\r\n        props.showLoader &&\r\n        props.images &&\r\n        images[newIndex]['loaded']\r\n      ) {\r\n        setDisplayLoader(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const getImageCaption = (): string => {\r\n    if (props.images && props.images.length > 0) {\r\n      return props.images[slideIndex].caption;\r\n    }\r\n    return \"\"\r\n  }\r\n\r\n  const getArrowStyle = (): string | void => {\r\n    if (arrowStyle == 'dark') {\r\n      return styles.dark_icon\r\n    } else if (arrowStyle == 'light') {\r\n      return styles.light_icon\r\n    }\r\n  }\r\n\r\n  const getIconStyle = (): string | undefined => {\r\n    if (arrowStyle == 'dark') {\r\n      return styles.dark_header_icon\r\n    }\r\n    else if (arrowStyle == 'light') {\r\n      return styles.light_header_icon\r\n    }\r\n  }\r\n\r\n  const setCurrentSlide = (newIndex) => {\r\n    let newDirection\r\n    if (newIndex > imgSlideIndex) {\r\n      newDirection = 1\r\n    } else {\r\n      newDirection = -1\r\n    }\r\n\r\n    setZoomIdx(newIndex)\r\n\r\n    setImgSlideIndex([newIndex, newDirection])\r\n\r\n    if (emblaApi) {\r\n      emblaApi.scrollTo(newIndex)\r\n    }\r\n  }\r\n\r\n  const dispatchOpenEvent = () => {\r\n    if (props.onOpen) {\r\n      props.onOpen(slideIndex, images[slideIndex]);\r\n    }\r\n    if (props.onSelect) {\r\n      props.onSelect(slideIndex, images[slideIndex])\r\n    }\r\n\r\n  }\r\n\r\n  const dispatchCloseEvent = () => {\r\n    if (props.onClose) {\r\n      props.onClose(slideIndex)\r\n    }\r\n  }\r\n\r\n  const dispatchNextImgEvent = (newIndex) => {\r\n    if (props.onNext) {\r\n      props.onNext(newIndex, images[newIndex])\r\n    }\r\n  }\r\n\r\n  const dispatchPrevImgEvent = (newIndex) => {\r\n    if (props.onPrev) {\r\n      props.onPrev(newIndex, images[newIndex])\r\n    }\r\n  }\r\n\r\n  const closeModal = () => {\r\n    //reset zoom ref\r\n    setZoomIdx(0)\r\n\r\n    if (isBrowserFullScreen) {\r\n      exitFullScreen()\r\n    }\r\n\r\n    // ensure slideshow is paused\r\n    if (isSlideshowPlaying) {\r\n      setIsSlideshowPlaying(false)\r\n    }\r\n\r\n    setShowModal(false)\r\n    setIsOpen(false)\r\n    setCarouselReady(false)\r\n    setEmblaReinitialized(false)\r\n    if (prevFocusedElem) prevFocusedElem?.focus();\r\n  }\r\n\r\n  const openModal = (num) => {\r\n\r\n    if (emblaApi) {\r\n      emblaApi.reInit();\r\n      if (emblaThumbsApi) {\r\n        emblaThumbsApi?.scrollTo(emblaApi.selectedScrollSnap())\r\n      }\r\n    }\r\n    setImgSlideIndex([num, 1])\r\n    setShowModal(true)\r\n    setIsOpen(true)\r\n\r\n  }\r\n\r\n  const setItemLoaded = (index) => {\r\n    if (props.images) {\r\n\r\n      setImages(images =>\r\n        images.map((img, i) => index === i ? {\r\n          ...img,\r\n          loaded: true\r\n        } : img)\r\n      )\r\n\r\n    }\r\n  }\r\n\r\n  const setImagesItemLoaded = (index) => {\r\n    setImages(images =>\r\n      images.map((img, i) => index === i ? {\r\n        ...img,\r\n        loaded: true\r\n      } : img)\r\n    )\r\n  }\r\n\r\n  const resetMedia = (slide_index) => {\r\n    resetVideo(slide_index)\r\n    resetImage()\r\n  }\r\n\r\n  const initImgMetadataPanel = () => {\r\n    if (isMobile && showImgMetadataPanel) {\r\n      setShowImgMetadataPanel(false)\r\n    }\r\n  }\r\n\r\n  const initSlide = (newSlideIndex) => {\r\n    setImgSlideIndex([newSlideIndex, 1])\r\n    let wrap_slide_index = wrapNums(0, images.length, newSlideIndex)\r\n    setZoomIdx(wrap_slide_index)\r\n    initLoader(wrap_slide_index);\r\n\r\n    if (displayImgMetadata) {\r\n      initImgMetadataPanel();\r\n\r\n      if (!imgMetadata[wrap_slide_index]) {\r\n        setIsLoading(true)\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const nextSlide = () => {\r\n    scrollNext();\r\n    initSlide(imgSlideIndex + 1);\r\n    if (imgAnimation == \"fade\") {\r\n      // since embla carousel not used for fade animations, dispatch next event manually\r\n      dispatchNextImgEvent((imgSlideIndex + 1) % images.length)\r\n    }\r\n  }\r\n\r\n  const prevSlide = () => {\r\n    scrollPrev()\r\n    initSlide(imgSlideIndex - 1);\r\n    if (imgAnimation == \"fade\") {\r\n      // since embla carousel not used for fade animations, dispatch next event manually\r\n      dispatchPrevImgEvent((imgSlideIndex - 1) % images.length)\r\n    }\r\n  }\r\n\r\n  const setThumbnailStartIndex = (index) => {\r\n    let thumbnailSwipeOptionConfig = thumbnailSwipeOptions;\r\n    thumbnailSwipeOptionConfig.startIndex = index\r\n    setThumbnailSwipeOptions(thumbnailSwipeOptionConfig)\r\n  }\r\n\r\n  const openModalWithSlideNum = (index) => {\r\n\r\n    let reactSwipeOptionConfig = reactSwipeOptions\r\n    reactSwipeOptionConfig.startIndex = index\r\n    setReactSwipeOptions(reactSwipeOptionConfig)\r\n    setThumbnailStartIndex(index)\r\n    setZoomIdx(index)\r\n    openModal(index)\r\n  }\r\n\r\n  const saveImage = () => {\r\n    if (props.images.length > 0) {\r\n      if (props.images[slideIndex].original) {\r\n        saveAs(props.images[slideIndex].original, 'image.jpg')\r\n      } else {\r\n        saveAs(props.images[slideIndex]['src'], 'image.jpg')\r\n      }\r\n    } else {\r\n      if (images[slideIndex].src) {\r\n        saveAs(images[slideIndex].src!, 'image.jpeg')\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const playSlideshow = () => {\r\n    setMagnifyingGlass(false)\r\n    if (isRTL) {\r\n      updateImageSlideshow(-1)\r\n    } else {\r\n      updateImageSlideshow(1)\r\n    }\r\n    setIsSlideshowPlaying(true)\r\n  }\r\n\r\n  const stopSlideshow = () => {\r\n    setIsSlideshowPlaying(false)\r\n  }\r\n\r\n  const getEmbedIndex = (slide_index, elems) => {\r\n    if (props.images) {\r\n      let iframe_index = 0;\r\n\r\n      for (let i = 0; i < props.images.length; i++) {\r\n        let item = props.images[i];\r\n        if ((item.type == \"customVideoEmbed\" || item.type == \"yt\")) {\r\n          if (i == slide_index) {\r\n            iframe_index++;\r\n            break;\r\n          }\r\n          else {\r\n            iframe_index++;\r\n          }\r\n        }\r\n      }\r\n\r\n      return iframe_index - 1;\r\n    }\r\n  }\r\n\r\n  const getEmblaClass = (index) => {\r\n\r\n    if (displayImgMetadata) {\r\n      return styles.embla__slide_grid;\r\n    }\r\n\r\n    if (slideIndex == index && imgAnimation == \"fade\") {\r\n      return `${styles.imgfade} ${styles.embla__slide} ${styles.embla__slide_selected}`\r\n    }\r\n    else if (imgAnimation == \"fade\") {\r\n      return `${styles.imgfade} ${styles.embla__slide}`;\r\n    }\r\n    else {\r\n      return styles.embla__slide;\r\n    }\r\n  }\r\n\r\n  const resetVideo = (slide_index) => {\r\n    if (props.images) {\r\n      let elem = props.images[slide_index]\r\n      if (elem) {\r\n        if (elem.type == 'htmlVideo') {\r\n          videoReferences.current[slide_index].pause()\r\n        }\r\n        else if (elem.type == \"yt\") {\r\n          if (videoElements[slide_index]) {\r\n            videoElements[slide_index].target.pauseVideo()\r\n\r\n          }\r\n        }\r\n        else if (elem.type == \"customVideoEmbed\") {\r\n          let lightboxjs_elem = document.getElementById(\"lightboxContainer\");\r\n          let elems = lightboxjs_elem?.querySelectorAll(\"iframe\");\r\n          if (elems) {\r\n            let iframe_elem_index = getEmbedIndex(slide_index, elems);\r\n            if (iframe_elem_index != undefined && iframe_elem_index >= 0) {\r\n              // reset iframe\r\n              let iframe = elems[iframe_elem_index];\r\n              let iframe_src = iframe.src\r\n              iframe.src = iframe_src;\r\n            }\r\n\r\n          }\r\n\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  const getNavigationDot = (index) => {\r\n    return (\r\n      <button style={slideIndex === index ? { backgroundColor: \"cornflowerblue\" } : {}}\r\n        className={`${styles.navigationDot} imageModal`} onClick={() => { navigationClick(index) }}></button>\r\n\r\n    )\r\n  }\r\n\r\n  const getThumbnailsOuterContainerStyle = () => {\r\n    let style = {};\r\n    if (isImageCaption()) {\r\n      if (showThumbnails) {\r\n        style[\"height\"] = \"21vh\" \r\n      }\r\n      else {\r\n        style[\"height\"] = \"12vh\"\r\n      }\r\n      style[\"backgroundColor\"] = backgroundColor;\r\n    }\r\n    return style;\r\n\r\n  }\r\n\r\n\r\n\r\n  const getImageThumbnail = (img, index, isNextJS, props) => {\r\n    return (\r\n      <div key={\"thumbnail_slide_\" + index} className={`${styles.embla_thumbs__slide}`}>\r\n\r\n        <img\r\n          className={`${props.thumbnailImgClass ? props.thumbnailImgClass : \"\"} ${styles.thumbnail} imageModal `}\r\n          src={isNextJS == true ? getThumbnailImgSrcNext(img, index) : getThumbnailImgSrc(img, index)}\r\n          alt={img.alt}\r\n          onLoad={() => setImagesLoaded(true)}\r\n          style={\r\n            slideIndex === index\r\n              ? { border: thumbnailBorder }\r\n              : { border: inactiveThumbnailBorder }\r\n          }\r\n          key={\"thumbnail_\" + index}\r\n          onClick={(event) => {\r\n\r\n            if (props.onThumbnailClick) {\r\n              props.onThumbnailClick(index, img);\r\n            }\r\n            navigationClick(index);\r\n          }}\r\n        />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const handleError = (event, index) => {\r\n    if (props.onImgError) {\r\n      props.onImgError(event, images[slideIndex], index);\r\n\r\n    }\r\n  }\r\n\r\n  const resetImage = () => {\r\n    if (enableMagnifyingGlass) {\r\n      initMagnifyingGlass()\r\n    } else {\r\n      if (zoomReferences.current[zoomIdx] != null) {\r\n        zoomReferences.current[zoomIdx]!.resetTransform()\r\n      }\r\n    }\r\n  }\r\n\r\n  const getThumbnailImgSrc = (img, index) => {\r\n\r\n    if (props.images && props.images.length > 0) {\r\n      if (props.images[index].thumbnailSrc) {\r\n        return props.images[index].thumbnailSrc\r\n      }\r\n    }\r\n\r\n    if (isVideo(index) && img.thumbnail) {\r\n      return img.thumbnail\r\n    }\r\n    else {\r\n      return img.src\r\n    }\r\n  }\r\n\r\n  const getThumbnailImgSrcNext = (img, index) => {\r\n    if (img.thumbnailSrc) {\r\n      return img.thumbnailSrc\r\n    }\r\n\r\n    else if (isVideo(index)) {\r\n      return img.thumbnail\r\n    } else {\r\n      let img_src = img.src\r\n      if (\r\n        typeof img_src === 'object' &&\r\n        !Array.isArray(img_src) &&\r\n        img_src !== null\r\n      ) {\r\n        return img_src.src\r\n      } else {\r\n        return img_src\r\n      }\r\n    }\r\n  }\r\n\r\n  const isAnimImageComponent = () => {\r\n    if (images) {\r\n      if (images.length == 1) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  const initWrapperClassname = () => {\r\n\r\n    let classNameStr = \"\";\r\n    if (props.className) {\r\n      classNameStr += `${props.className} `\r\n    }\r\n    if (isAnimImageComponent()) {\r\n      if (props.imgWrapperClassName) {\r\n        classNameStr += `${props.imgWrapperClassName} `\r\n      }\r\n    }\r\n\r\n    classNameStr += `${styles.lightboxjs}`;\r\n\r\n    return classNameStr;\r\n  }\r\n\r\n  const initStyling = () => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        setBackgroundColor(themes[props.theme].background)\r\n        // setIconColor(themes[props.theme].iconColor)\r\n        // setThumbnailBorder(themes[props.theme].thumbnailBorder)\r\n        setTextColor(themes[props.theme].textColor)\r\n      }\r\n    }\r\n\r\n    if (props.fullScreen) {\r\n      if (props.fullScreen == true) {\r\n        setImgAnimation(props.imgAnimation && props.imgAnimation == \"imgDrag\" ? props.imgAnimation : \"fade\")\r\n        setIsRounded(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const getMetadataPanel = () => {\r\n\r\n    let imgMetadataItem = imgMetadata[slideIndex];\r\n\r\n    if (imgMetadataItem) {\r\n      let element = <div className={styles.metadataPanel}>\r\n        <b>Filename</b>\r\n        {imgMetadataItem.name ? <p>{imgMetadataItem.name}</p> : null}\r\n\r\n        {imgMetadataItem.createDate ?\r\n          <div>\r\n            <b>Captured Time</b>\r\n            <p>{imgMetadataItem.createDate.toString()}</p>\r\n          </div>\r\n\r\n          : null}\r\n\r\n        {\r\n          imgMetadataItem.width && imgMetadataItem.height ?\r\n            <div>\r\n              <b>Resolution</b>\r\n              <p>{imgMetadataItem.width}*{imgMetadataItem.height}</p>\r\n            </div> : null\r\n        }\r\n\r\n        {imgMetadataItem.isoData || imgMetadataItem.fNumber || imgMetadataItem.shutterSpeed ?\r\n          <div>\r\n            <b>Image Details</b>\r\n            {\r\n              imgMetadataItem.isoData ? <span>ISO {imgMetadataItem.isoData}</span>\r\n                : null\r\n            }\r\n\r\n            {\r\n              imgMetadataItem.fNumber ? <span>f{imgMetadataItem.fNumber}</span> : null\r\n            }\r\n\r\n            {\r\n              imgMetadataItem.shutterSpeed ? <span>Shutter speed: {imgMetadataItem.shutterSpeed}</span> : null\r\n            }\r\n          </div> : null\r\n\r\n        }\r\n\r\n\r\n      </div>\r\n      return element;\r\n    }\r\n\r\n  }\r\n\r\n  const imageSlideElement = (index) => {\r\n    let imageElem;\r\n    if (!props.images) {\r\n      imageElem = (\r\n        <img\r\n          className={`imageModal ${props.imgElemClassname ? props.imgElemClassname : ''}\r\n        ${props.fullScreen\r\n              ? styles.lightbox_img\r\n              : styles.lightbox_img\r\n            } \r\n        ${enableMagnifyingGlass\r\n              ? styles.maxWidthFull\r\n              : styles.maxWidthWithoutMagnifier\r\n            }  ${styles.contain_img} `}\r\n          style={getImageStyle()}\r\n          ref={imageRef}\r\n          loading='lazy'\r\n          src={\r\n            images[index].original ? images[index].original : images[index].src\r\n          }\r\n          onError={(event) => {\r\n            handleError(event, index)\r\n          }}\r\n          onLoad={(img) => {\r\n            if (index == slideIndex) {\r\n              setDisplayLoader(false)\r\n            }\r\n\r\n            if (props.images) {\r\n              setItemLoaded(index)\r\n            } else {\r\n              setImagesItemLoaded(index)\r\n            }\r\n\r\n          }}\r\n          id='img'\r\n        />\r\n\r\n      )\r\n    } else if (props.images && props.render) {\r\n      imageElem = props.render.imgSlide(props.images[index])\r\n    } else {\r\n      let img_link\r\n\r\n      // check if object (Next.js local image imports are passed as objects with a src attribute)\r\n      if (props.images) {\r\n        if (\r\n          typeof images[index].src === 'object' &&\r\n          !Array.isArray(images[index].src) &&\r\n          images[index].src !== null\r\n        ) {\r\n          img_link = images[index].src?.src\r\n        } else if (props.coverImageInLightbox == true) {\r\n          img_link = images[index].src\r\n        } else {\r\n          img_link = images[index].src\r\n        }\r\n      }\r\n\r\n\r\n      imageElem = (\r\n        <img\r\n          className={`imageModal ${props.imgElemClassname ? props.imgElemClassname : ''}\r\n        ${props.fullScreen \r\n              ? styles.lightbox_img\r\n              : styles.lightbox_img\r\n            } \r\n        ${enableMagnifyingGlass\r\n              ? styles.maxWidthFull\r\n              : styles.maxWidthWithoutMagnifier\r\n            } ${styles.contain_img} `}\r\n          ref={imageRef}\r\n          loading='lazy'\r\n          style={getImageStyle()}\r\n          src={\r\n            images[index].original\r\n              ? images[index].original\r\n              : img_link\r\n          }\r\n          onError={(event) => {\r\n            handleError(event, index)\r\n          }}\r\n          onLoad={(img) => {\r\n            if (index == slideIndex) {\r\n              setDisplayLoader(false)\r\n            }\r\n\r\n            if (props.images) {\r\n              setItemLoaded(index)\r\n            } else {\r\n              setImagesItemLoaded(index)\r\n            }\r\n\r\n          }}\r\n          id='img'\r\n        />\r\n      )\r\n    }\r\n\r\n    return imageElem\r\n  }\r\n\r\n  const getCloseIconBtnStyle = () => {\r\n    let style_object = {}\r\n    if (iconColor) {\r\n      style_object =  { color: iconColor }\r\n    }\r\n    if (props.closeIconBtnStyle) {\r\n      let closeIconBtnStyleKeys = Object.keys(props.closeIconBtnStyle)\r\n      for (let i = 0; i < closeIconBtnStyleKeys.length; i++) {\r\n        let keyName = closeIconBtnStyleKeys[i];\r\n        let style_obj = props.closeIconBtnStyle[keyName]\r\n        style_object[keyName] =  style_obj;\r\n      }\r\n    }\r\n    return style_object;\r\n\r\n  }\r\n\r\n  const isPanningDisabled = () => {\r\n    if (isMobile && zoomedIn == false) {\r\n      return true;\r\n    }\r\n    if (isMobile && zoomedIn) {\r\n      return false;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  const getImageFilename = (img_src) => {\r\n    let img_src_split = img_src.split(\"/\");\r\n    let name = img_src_split[img_src_split.length - 1];\r\n    return name;\r\n  }\r\n\r\n  const parseCreateDate = (js_date) => {\r\n\r\n    if (js_date) {\r\n      let date = js_date.getDate();\r\n      let month = js_date.getMonth() + 1;\r\n      let year = js_date.getFullYear();\r\n      let time = js_date.toLocaleTimeString(metadataLocale);\r\n\r\n      return '' + year + '-' + (month <= 9 ? '0' + month : month) + '-' + (date <= 9 ? '0' + date : date) + ` ${time}`;\r\n    }\r\n    return \"\"\r\n  }\r\n\r\n  const getLightboxElem = (index) => {\r\n    if (isCustomEmbed(index)) {\r\n      return customEmbedElement(index)\r\n    }\r\n    else if (isVideo(index)) {\r\n      return videoSlideElement(index)\r\n    }\r\n    else if (isPictureElement(index)) {\r\n      let elem_metadata = props.images[index][\"picture\"];\r\n      return <picture className={`imageModal \r\n      ${props.fullScreen\r\n          ?  styles.lightbox_img\r\n          : styles.lightbox_img\r\n        } \r\n      ${enableMagnifyingGlass\r\n          ? styles.maxWidthFull\r\n          : styles.maxWidthWithoutMagnifier\r\n        } `}>\r\n        {Object.keys(elem_metadata).map((format) => (\r\n          <source\r\n            type={format}\r\n            key={format}\r\n            srcSet={elem_metadata[format].srcSet}\r\n          />\r\n        ))}\r\n        <img src={elem_metadata['fallback']}\r\n          onError={(error) => {\r\n            handleError(error, index)\r\n          }}\r\n        />\r\n      </picture>\r\n    }\r\n    else {\r\n\r\n      if ((images && props.render) ||\r\n        frameworkID == 'next') {\r\n        return imageSlideElement(index);\r\n      }\r\n      else {\r\n        return <img\r\n          className={`imageModal ${props.imgElemClassname ? props.imgElemClassname : ''}\r\n          ${props.fullScreen\r\n              ? styles.lightbox_img\r\n              : styles.lightbox_img\r\n            } \r\n          ${enableMagnifyingGlass\r\n              ? styles.maxWidthFull\r\n              : styles.maxWidthWithoutMagnifier\r\n            } ${styles.contain_img} `}\r\n          ref={imageRef}\r\n          key={index}\r\n          loading='lazy'\r\n          style={getImageStyle()}\r\n          src={\r\n            images && images[index].original\r\n              ? images[index].original\r\n              : images[index].src\r\n          }\r\n          onLoad={(img: any) => {\r\n\r\n            if (displayImgMetadata) {\r\n\r\n              if (img) {\r\n                let img_target: any = img.target;\r\n                let individual_image_metadata = {};\r\n\r\n                // get filename\r\n                let name = getImageFilename(img_target.src)\r\n                individual_image_metadata[\"name\"] = name;\r\n\r\n                exifr.parse(img_target, true).then(exif => {\r\n                  if (exif) {\r\n                    let keys = [\"isoData\", \"createDate\", \"height\", \"width\", \"shutterSpeed\", \"fNumber\"];\r\n\r\n                    for (let i = 0; i < keys.length; i++) {\r\n                      let keyName = keys[i];\r\n                      switch (keyName) {\r\n                        case \"isoData\":\r\n                          if (exif.ISO) {\r\n                            individual_image_metadata[\"isoData\"] = exif.ISO;\r\n                          }\r\n                          break;\r\n                        case \"createDate\":\r\n                          if (exif.CreateDate) {\r\n                            individual_image_metadata[\"createDate\"] = parseCreateDate(exif.CreateDate);\r\n                          }\r\n                          break;\r\n                        case \"height\":\r\n                          if (exif.ExifImageHeight) {\r\n                            individual_image_metadata[\"height\"] = exif.ExifImageHeight;\r\n                          }\r\n                          break;\r\n                        case \"width\":\r\n                          if (exif.ExifImageWidth) {\r\n                            individual_image_metadata[\"width\"] = exif.ExifImageWidth;\r\n                          }\r\n                          break;\r\n                        case \"fNumber\":\r\n                          if (exif.fNumber) {\r\n                            individual_image_metadata[\"fNumber\"] = exif.fNumber;\r\n                          }\r\n                          break;\r\n                        case \"shutterSpeed\":\r\n                          if (exif.ShutterSpeedValue) {\r\n                            individual_image_metadata[\"shutterSpeed\"] = exif.ShutterSpeedValue;\r\n                          }\r\n                          break;\r\n                      }\r\n                    }\r\n\r\n                    let imgMetadataItems = imgMetadata;\r\n                    imgMetadataItems[index] = individual_image_metadata;\r\n                    setImgMetadata(imgMetadataItems);\r\n\r\n                    if (index == slideIndex) {\r\n                      setIsLoading(false)\r\n                    }\r\n                  }\r\n\r\n                }\r\n                )\r\n              }\r\n            }\r\n\r\n            if (index == slideIndex) {\r\n              setDisplayLoader(false)\r\n            }\r\n\r\n            if (props.images) {\r\n              setItemLoaded(index)\r\n            } else {\r\n              setImagesItemLoaded(index)\r\n            }\r\n          }}\r\n          id='img'\r\n        />\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  const isCustomEmbed = (index) => {\r\n\r\n    if (props.images) {\r\n      let elem = props.images[index]\r\n      if (elem) {\r\n        if (elem.type == 'customEmbed') {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  const isVideo = (index) => {\r\n\r\n    if (props.images) {\r\n      let elem = props.images[index]\r\n      if (elem) {\r\n        if (elem.type == 'yt' || elem.type == 'htmlVideo' || elem.type == 'customVideoEmbed') {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  const shouldDisplayMetadataPanel = () => {\r\n    if (isMobile) {\r\n      if (showImgMetadataPanel) {\r\n        return true;\r\n      }\r\n      else {\r\n        return false;\r\n      }\r\n    }\r\n    else {\r\n      return displayImgMetadata;\r\n    }\r\n  }\r\n\r\n  const isPictureElement = (index) => {\r\n    if (props.images) {\r\n      let elem = props.images[index]\r\n      if (elem) {\r\n        if (elem.picture) {\r\n          return true\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!emblaApi) return\r\n\r\n    if (imgAnimation == \"fade\") {\r\n      emblaApi.internalEngine().translate.toggleActive(false);\r\n    }\r\n\r\n  }, [\r\n    carouselReady, emblaApi\r\n  ])\r\n\r\n  const isHTMLVideo = (index) => {\r\n    if (props.images) {\r\n      if (props.images && props.images[index].type == 'htmlVideo') {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  const videoSlideElement = (index) => {\r\n    let elem = props.images[index];\r\n    let videoElem;\r\n\r\n    if (elem.type == 'yt') {\r\n      videoElem = (\r\n        <div className={`${styles.videoOuterContainer} imageModal`}>\r\n          <YouTube\r\n            videoId={elem.videoID}\r\n            ref={(el) => (videoReferences.current[index] = el)}\r\n            iframeClassName={`${styles.ytVideo}`}\r\n            title='YouTube video player'\r\n            opts={{\r\n              height: getVideoHeight(elem),\r\n              width: getVideoWidth(elem),\r\n              playerVars: {\r\n                // https://developers.google.com/youtube/player_parameters\r\n                autoplay: shouldAutoplay(elem) ? 1 : 0,\r\n              }\r\n            }\r\n            }\r\n            // style={object}\r\n            // className={`${styles.ytVideo}`}\r\n            //loading={string}                     \r\n            onReady={(event) => {\r\n              let videoElems = videoElements; videoElems[index] = event; setVideoElements(videoElems);\r\n              if (index == slideIndex) {\r\n                setDisplayLoader(false)\r\n              }\r\n              setItemLoaded(index)\r\n            }}\r\n            onPlay={(event) => {\r\n              setYTVideoCurrentlyPlaying(true)\r\n            }}\r\n            onPause={(event) => {\r\n              setYTVideoCurrentlyPlaying(false)\r\n            }}\r\n            onEnd={(event) => { setYTVideoCurrentlyPlaying(false) }}\r\n            onError={(event) => { handleError(event, index) }}\r\n            onStateChange={(event) => { }}\r\n            onPlaybackRateChange={(event) => { }}\r\n            onPlaybackQualityChange={(event) => { }}\r\n          />\r\n        </div>\r\n      )\r\n    } else if (elem.type == 'htmlVideo') {\r\n      videoElem = (\r\n        <div\r\n          className={`${styles.htmlVideo} ${styles.htmlVideoOuterContainer} imageModal`}\r\n        >\r\n          <video\r\n            className={`${styles.cursorPointer} ${styles.lightboxVideo}`}\r\n            width={getVideoWidth(elem)}\r\n            ref={(el) => (videoReferences.current[index] = el)}\r\n            onPlay={() => {\r\n            }}\r\n            onError={(event) => {\r\n              handleError(event, index)\r\n            }}\r\n            height={getVideoHeight(elem)}\r\n            autoPlay={index == imgSlideIndex ? shouldAutoplay(elem) : false}\r\n            controls\r\n          >\r\n            <source\r\n              src={elem.videoSrc}\r\n              type='video/mp4'\r\n              onLoad={() => {\r\n                setItemLoaded(index)\r\n              }}\r\n            />\r\n          </video>\r\n        </div>\r\n      )\r\n    }\r\n    else if (elem.type == \"customVideoEmbed\") {\r\n      videoElem = (\r\n        <div className={`${styles.customVideoContainer} imageModal`}>\r\n          {elem.embed}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return videoElem\r\n  }\r\n\r\n  const customEmbedElement = (index) => {\r\n    let elem = props.images[index];\r\n    let customElem;\r\n\r\n    if (elem.type == \"customEmbed\") {\r\n      customElem = (\r\n        <div className={`${styles.customEmbedContainer} imageModal`}>\r\n          {elem.embed}\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return customElem\r\n  }\r\n\r\n  const initZoom = (ref) => {\r\n    if (imgAnimation == \"fade\") {\r\n      if (ref.state.scale <= 1) {\r\n        setZoomedIn(false)\r\n      }\r\n      else {\r\n        setZoomedIn(true)\r\n      }\r\n    }\r\n    else {\r\n      if (ref.state.scale <= 1.65) {\r\n        setZoomedIn(false)\r\n      }\r\n      else {\r\n        setZoomedIn(true)\r\n      }\r\n    }\r\n\r\n\r\n  }\r\n\r\n  const regularImgPaneNodes = Array.apply(null, Array(images.length)).map(\r\n    (_, index) => {\r\n      return (\r\n        <div key={index}>\r\n          {\r\n            enableMagnifyingGlass == true ? (\r\n              <Magnifier\r\n                src={images[index].src!}\r\n                className={`${styles.magnifyWrapper} ${styles.lightbox_img}`}\r\n                height={imgContainHeight}\r\n                width={imgContainWidth}\r\n                mgShowOverflow={false}\r\n              />\r\n            )\r\n\r\n              : (\r\n                <div className={getEmblaClass(index)} onTouchStart={onTouchStart} onTouchMove={onTouchMove}\r\n                onTouchEnd={onTouchEnd} onMouseDown={onMouseDown} onMouseUp={onMouseUp}>\r\n\r\n                  <TransformWrapper\r\n                    ref={(el) => (zoomReferences.current[index] = el)}\r\n                    onWheel={(ref, wheelEvent) => {\r\n                      initZoom(ref)\r\n                    }}\r\n                    disabled={disableZoom}\r\n                    panning={{\r\n                      disabled: isPanningDisabled()\r\n                    }}\r\n\r\n                    key={index}\r\n                    onZoom={\r\n                      (ref, event) => {\r\n                        initZoom(ref)\r\n                      }\r\n                    }\r\n                    onZoomStop={(ref, event) => { initZoom(ref) }}\r\n                    onTransformed={\r\n                      (ref, event) => {\r\n                        initZoom(ref)\r\n                      }\r\n                    }\r\n                    onPinchingStop={(ref, event) => {\r\n                      initZoom(ref)\r\n                    }}\r\n                    centerZoomedOut={true}\r\n                    initialScale={1}\r\n                    maxScale={maxScale}\r\n                    alignmentAnimation={{ sizeX: 0, sizeY: 0 }}\r\n                  >\r\n                    <TransformComponent\r\n                      wrapperClass={styles.react_transform_wrapper}\r\n                      contentClass={styles.react_transform_component}\r\n                      wrapperStyle={{\r\n                        maxWidth: '100vw',\r\n                        height: '100vh',\r\n                        margin: 'auto'\r\n                      }}\r\n                      contentStyle={\r\n                        {\r\n                            maxWidth: '100vw',\r\n                            height: '100vh',\r\n                            margin: 'auto',\r\n                            display: 'grid'\r\n                          }\r\n                      }\r\n                      key={index}\r\n                    >\r\n                      <div\r\n                        className={`${props.fullScreen\r\n                          ? styles.slideshow_img\r\n                          : styles.slideshow_img\r\n                          } ${props.lightboxImgClass ? props.lightboxImgClass : \"\"}\r\n                      ${displayImgMetadata ? styles.slideshow_img_metadata : \"\"}\r\n                      `}\r\n                      >\r\n                        {getLightboxElem(index)}\r\n                      </div>\r\n                    </TransformComponent>\r\n                  </TransformWrapper>\r\n                </div>\r\n              )}\r\n        </div>\r\n      )\r\n    }\r\n  )\r\n\r\n  const initMagnifyingGlass = () => {\r\n    if (!enableMagnifyingGlass) {\r\n      initImageDimensions()\r\n    } else {\r\n      setImgAnimation('imgDrag')\r\n    }\r\n    setMagnifyingGlass(!enableMagnifyingGlass)\r\n  }\r\n\r\n  // const shouldShowImgMetadataPanel = () => {\r\n  //   if (displayImgMetadata && showImgMetadataPanel) {\r\n  //     return true;\r\n  //   }\r\n  //   return false;\r\n  // }\r\n\r\n  const getMetadataPanelStyle = () => {\r\n    let style_object = {}\r\n    if (isMobile && showImgMetadataPanel) {\r\n      style_object = { height: \"100vh\" }\r\n    }\r\n    style_object[\"color\"] = getMetadataTextColor()\r\n    return style_object;\r\n  }\r\n\r\n  const initImageDimensions = () => {\r\n    let img\r\n    if (imgSlideIndex == 0 || imgSlideIndex % images.length == 0) {\r\n      img = document.getElementById('img')\r\n    } else {\r\n      img = imageRef.current\r\n    }\r\n\r\n    var ratio = img.naturalWidth / img.naturalHeight\r\n    var width = img.height * ratio\r\n    var height = img.height\r\n    if (width > img.width) {\r\n      width = img.width\r\n      height = img.width / ratio\r\n    }\r\n\r\n    setImgContainHeight(height)\r\n    setImgContainWidth(width)\r\n  }\r\n\r\n  const initFullScreenChangeEventListeners = () => {\r\n    document.addEventListener('fullscreenchange', exitFullScreenHandler)\r\n    document.addEventListener('webkitfullscreenchange', exitFullScreenHandler)\r\n    document.addEventListener('MSFullscreenChange', exitFullScreenHandler)\r\n    document.addEventListener('mozfullscreenchange', exitFullScreenHandler)\r\n  }\r\n\r\n  const removeFullScreenChangeEventListeners = () => {\r\n    document.removeEventListener('fullscreenchange', exitFullScreenHandler)\r\n    document.removeEventListener(\r\n      'webkitfullscreenchange',\r\n      exitFullScreenHandler\r\n    )\r\n    document.removeEventListener('MSFullscreenChange', exitFullScreenHandler)\r\n    document.removeEventListener('mozfullscreenchange', exitFullScreenHandler)\r\n  }\r\n\r\n  const initEventListeners = () => {\r\n    if (isBrowser() && !noWindow) {\r\n      window.addEventListener('resize', handleWindowResize)\r\n    }\r\n  }\r\n\r\n  const removeEventListeners = () => {\r\n    removeOnSelectListener();\r\n    if (isBrowser() && !noWindow) {\r\n      window.removeEventListener('resize', handleWindowResize)\r\n    }\r\n  }\r\n\r\n  const setReducedMotion = (mediaQuery) => {\r\n    if (mediaQuery.matches) {\r\n      setImgAnimation('fade')\r\n    }\r\n  }\r\n\r\n  // Check if the user has a preference for reduced motion\r\n  // If so, the image animation transitions between slides in the slideshow will be adjusted\r\n  // to account for this\r\n  const checkAndInitReducedMotion = () => {\r\n    let reducedMotionMediaQuery: any = ''\r\n\r\n    if (isBrowser() && !noWindow) {\r\n      reducedMotionMediaQuery = window.matchMedia(\r\n        '(prefers-reduced-motion: reduce)'\r\n      )\r\n\r\n      if (!reducedMotionMediaQuery || reducedMotionMediaQuery.matches) {\r\n        setImgAnimation('fade')\r\n      }\r\n\r\n      if (reducedMotionMediaQuery?.addEventListener) {\r\n        reducedMotionMediaQuery.addEventListener('change', setReducedMotion(reducedMotionMediaQuery));\r\n      } \r\n      else {\r\n        reducedMotionMediaQuery.addListener(setReducedMotion(reducedMotionMediaQuery));\r\n      }\r\n\r\n    }\r\n\r\n    return reducedMotionMediaQuery\r\n  }\r\n\r\n  const initPropsForControlIcons = () => {\r\n    if (props.showFullScreenIcon != undefined) {\r\n      setDisplayFullScreenIcon(props.showFullScreenIcon)\r\n    }\r\n    if (props.showThumbnailIcon != undefined) {\r\n      setDisplayThumbnailIcon(props.showThumbnailIcon)\r\n    }\r\n\r\n    if (props.showSlideshowIcon != undefined) {\r\n      setDisplaySlideshowIcon(props.showSlideshowIcon)\r\n    }\r\n    if (props.showMagnificationIcons != undefined) {\r\n      setDisplayMagnificationIcons(props.showMagnificationIcons)\r\n    }\r\n  }\r\n\r\n  const initProps = () => {\r\n    if (props.showControls != undefined) {\r\n      setShowControls(props.showControls)\r\n      if (props.showControls == false) {\r\n        setDisplayMagnificationIcons(false)\r\n      }\r\n    }\r\n\r\n    initPropsForControlIcons()\r\n\r\n    if (props.disableImageZoom) {\r\n      setDisableZoom(props.disableImageZoom)\r\n    }\r\n\r\n    if (isBrowser() && !noWindow) {\r\n      setWidth(window.innerWidth)\r\n    }\r\n\r\n    // if (window.innerWidth <= mobileWidth) {\r\n    //   setImgAnimation('fade')\r\n    // }\r\n  }\r\n\r\n  // Slideshow feature; if isSlideshowPlaying set to true, then slideshow cycles through images\r\n  useInterval(\r\n    () => {\r\n      if (isRTL) {\r\n        updateImageSlideshow(-1)\r\n      } else {\r\n        updateImageSlideshow(1)\r\n      }\r\n    },\r\n\r\n    // Delay in milliseconds or null to stop it\r\n    isSlideshowPlaying ? slideshowInterval : null\r\n  )\r\n\r\n  const openFullScreen = (lightbox_elem) => {\r\n    if (lightbox_elem.requestFullscreen) {\r\n      lightbox_elem.requestFullscreen();\r\n    }\r\n\r\n    /* Safari */\r\n    else if (lightbox_elem.webkitRequestFullscreen) {\r\n      lightbox_elem.webkitRequestFullscreen();\r\n    }\r\n\r\n    /* Internet Explorer */\r\n    else if (lightbox_elem.msRequestFullscreen) {\r\n      lightbox_elem.msRequestFullscreen();\r\n    }\r\n  }\r\n\r\n  const closeFullScreen = (document) => {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    }\r\n\r\n    /* Safari */\r\n    else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    }\r\n\r\n    /* Internet Explorer */\r\n    else if (document.msExitFullscreen) {\r\n      document.msExitFullscreen();\r\n    }\r\n  }\r\n\r\n  const isBrowser = () => {\r\n    if (!noWindow) {\r\n      return typeof window !== \"undefined\"\r\n    }\r\n    return false;\r\n  }\r\n\r\n  const initRTLImages = () => {\r\n    // flip images array\r\n    let imagesMetadataCopy = props.images\r\n    imagesMetadataCopy.reverse()\r\n\r\n    setImages(imagesMetadataCopy)\r\n\r\n    if (images.length > 0) {\r\n      let imagesRTLCopy = images\r\n      imagesRTLCopy.reverse()\r\n      setImages(imagesRTLCopy)\r\n    }\r\n  }\r\n\r\n  const initAndOpenLightbox = (i, img_gallery, isMounted) => {\r\n    let index;\r\n  \r\n    if (isRTL) {\r\n      index = getRTLIndex(img_gallery.length, i)\r\n    } else {\r\n      index = i\r\n    }\r\n  \r\n    let reactSwipeOptionConfig = reactSwipeOptions\r\n     reactSwipeOptionConfig.startIndex = index\r\n  \r\n    if (isMounted) setReactSwipeOptions(reactSwipeOptionConfig)\r\n    setZoomIdx(index)\r\n    openModal(index)\r\n  }\r\n\r\n  const initImages = (isMounted, updateImages) => {\r\n    if (coverMode && props.images) {\r\n      if (props.coverImageInLightbox == false) {\r\n        let filterImages = props.images.filter((img) => img.cover != true)\r\n        setImages(filterImages)\r\n      } else {\r\n        setImages(props.images)\r\n      }\r\n    }\r\n\r\n    if (updateImages || !isInit) {\r\n      if (lightboxIdentifier && props.children) {\r\n\r\n        if (props.queryElems) {\r\n          let img_gallery: any = [];\r\n          for (let k = 0; k < props.queryElems.length; k++) {\r\n            let elemSelector = props.queryElems[k];\r\n            let queryElems = document.querySelectorAll(\r\n              `${elemSelector}`\r\n            );\r\n            queryElems.forEach(element => {\r\n              img_gallery.push(element)\r\n            });\r\n              \r\n          }\r\n          let img_elements: ImageElement[] = []\r\n\r\n          if (img_gallery.length > 0) {\r\n            for (let i = 0; i <= img_gallery.length - 1; i++) {\r\n              let img = img_gallery[i]\r\n                img.addEventListener(\r\n                  'click',\r\n                  () => {\r\n                    initAndOpenLightbox(i, img_gallery, isMounted)\r\n                  },\r\n                  false\r\n                )\r\n                img.classList.add('cursor-pointer')\r\n                \r\n                if (img.src) {\r\n                  img_elements.push({\r\n                    src: img.src,\r\n                    alt: img.alt,\r\n                    loaded: false\r\n                  })\r\n                }else if (img.href) {\r\n                  img_elements.push({\r\n                    src: img.href,\r\n                    alt: img.alt,\r\n                    loaded: false\r\n                  })\r\n                }\r\n          \r\n            }\r\n            \r\n            if (isMounted && !coverMode) {\r\n              if (props.framework != \"next\") {\r\n                setImages(img_elements)\r\n              }\r\n              else if (props.framework == \"next\") {\r\n                setImages(props.images)\r\n              }\r\n            }\r\n\r\n        }\r\n      }\r\n        else {\r\n\r\n          let img_gallery: NodeListOf<HTMLImageElement> = document.querySelectorAll(\r\n            `[data-lightboxjs=${lightboxIdentifier}]`\r\n          )\r\n          let originalImageAttr = false;\r\n  \r\n          let img_elements: ImageElement[] = []\r\n          if (img_gallery.length > 0) {\r\n            for (let i = 0; i <= img_gallery.length - 1; i++) {\r\n              let img = img_gallery[i]\r\n  \r\n              let attr_val = img.getAttribute('data-lightboxjs')\r\n              if (attr_val == lightboxIdentifier) {\r\n                img.addEventListener(\r\n                  'click',\r\n                  () => {\r\n                    initAndOpenLightbox(i, img_gallery, isMounted)\r\n                  },\r\n                  false\r\n                )\r\n                img.classList.add('cursor-pointer')\r\n  \r\n                let original_img_src = img.getAttribute('data-lightboxjs-original')\r\n  \r\n                if (original_img_src) {\r\n                  img_elements.push({\r\n                    src: original_img_src,\r\n                    alt: img.alt,\r\n                    loaded: false\r\n                  })\r\n                  originalImageAttr = true;\r\n                }\r\n                else if (img.src) {\r\n                  img_elements.push({\r\n                    src: img.src,\r\n                    alt: img.alt,\r\n                    loaded: false\r\n                  })\r\n                } else if (img.tagName == 'DIV') {\r\n                  let corresponding_img_item = props.images[i]\r\n                  let img_src = corresponding_img_item.src\r\n                  let img_alt = corresponding_img_item.alt\r\n                  img_elements.push({\r\n                    src: img_src,\r\n                    alt: img_alt,\r\n                    loaded: false\r\n                  })\r\n                }\r\n              }\r\n            }\r\n            if (isMounted && !coverMode) {\r\n              if (originalImageAttr) {\r\n                setImages(img_elements)\r\n  \r\n              }\r\n              else if (props.showAllImages != true && props.framework != \"next\") {\r\n                setImages(img_elements)\r\n              }\r\n              else if (props.framework == \"next\" && !originalImageAttr) {\r\n                setImages(props.images)\r\n              }\r\n              else {\r\n                setImages(props.images)\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            if (props.images) {\r\n              setImages(props.images)\r\n            }\r\n          }\r\n        }\r\n\r\n      }\r\n      else if (lightboxIdentifier && props.images && !props.children) {\r\n        setImages(props.images)\r\n\r\n      }\r\n      else if (!lightboxIdentifier && props.images && !props.children) {\r\n        setImages(props.images)\r\n      }\r\n\r\n      // otherwise, if no lightbox identifier or custom render method\r\n      else if (!props.render) {\r\n        let imgArray: any = [];\r\n        // only one image\r\n        if (!Array.isArray(props.children)) {\r\n          imgArray.push(props.children);\r\n        }\r\n\r\n        // multiple images\r\n        else {\r\n          imgArray = props.children;\r\n        }\r\n\r\n        let imgs: ImageElement[] = []\r\n        for (let k = 0; k < imgArray.length; k++) {\r\n          let img_elem = imgArray[k]\r\n          let img_obj = {\r\n            src: img_elem.props.src,\r\n            alt: img_elem.props.alt,\r\n            loaded: false\r\n          }\r\n          imgs.push(img_obj)\r\n        }\r\n        if (isRTL) {\r\n          imgs.reverse()\r\n        }\r\n        if (isMounted) setImages(imgs)\r\n\r\n        setPreviewImageElems(imgArray)\r\n\r\n      } else {\r\n        if (isMounted) {\r\n          setImages(props.images);\r\n        }\r\n      }\r\n\r\n      if (isMounted) setIsInit(true)\r\n    }\r\n  }\r\n\r\n  const dispatchSlideSelectEvents = (newIndex, prevIndex) => {\r\n\r\n    if (props.onSelect) {\r\n      props.onSelect(newIndex, images[newIndex])\r\n    }\r\n\r\n    if (newIndex == 0 && prevIndex == images.length - 1) {\r\n      dispatchNextImgEvent(newIndex)\r\n    }\r\n    else if (newIndex == images.length - 1 && prevIndex == 0) {\r\n      dispatchPrevImgEvent(newIndex)\r\n    }\r\n\r\n    else if (newIndex > prevIndex) {\r\n      dispatchNextImgEvent(newIndex)\r\n    }\r\n    else if (newIndex < prevIndex) {\r\n      dispatchPrevImgEvent(newIndex)\r\n    }\r\n\r\n  }\r\n\r\n  const onSelect = useCallback(() => {\r\n\r\n    if (!emblaApi) return\r\n\r\n    let newSlideIndex: any = emblaApi.selectedScrollSnap();\r\n    let prevSlideIndex: any = emblaApi.previousScrollSnap();\r\n\r\n    if (newSlideIndex != prevSlideIndex) {\r\n      initSlide(newSlideIndex);\r\n      resetMedia(prevSlideIndex);\r\n      dispatchSlideSelectEvents(newSlideIndex, prevSlideIndex)\r\n    }\r\n\r\n    if (emblaThumbsApi) {\r\n      emblaThumbsApi.scrollTo(emblaApi.selectedScrollSnap())\r\n    }\r\n\r\n  }, [emblaApi, emblaThumbsApi])\r\n\r\n  const onReinit = useCallback(() => {\r\n    if (!emblaApi) return\r\n    setEmblaReinitialized(true)\r\n\r\n  }, [emblaApi, emblaReinitialized])\r\n\r\n\r\n  const handleResize = (entry) => {\r\n    emblaApi?.reInit();\r\n  };\r\n\r\n  const rootNode = emblaApi?.rootNode() || null;\r\n\r\n  useResizeObserver(rootNode, handleResize);\r\n\r\n  const removeOnSelectListener = useCallback(() => {\r\n    if (emblaApi) emblaApi.off('select', onSelect)\r\n  }, [emblaApi, onSelect])\r\n\r\n  useEffect(() => {\r\n    if (emblaApi) {\r\n      if (zoomedIn) {\r\n        emblaApi.reInit({ watchDrag: false });\r\n      }\r\n      else {\r\n        emblaApi.reInit({ watchDrag: true });\r\n      }\r\n    }\r\n  }, [zoomedIn])\r\n\r\n  useEffect(() => {\r\n    if (displayImgMetadata) {\r\n      if (width != 0 && isMobile) {\r\n        setShowImgMetadataPanel(false)\r\n      }\r\n      else {\r\n        setShowImgMetadataPanel(true)\r\n      }\r\n    }\r\n\r\n  }, [width])\r\n\r\n  useEffect(() => {\r\n    if (!emblaApi) return\r\n\r\n    if (showModal) emblaApi.reInit()\r\n  }, [showModal, emblaApi])\r\n\r\n  useEffect(() => {\r\n    if (emblaApi) emblaApi.on('select', onSelect)\r\n    if (emblaApi) { }\r\n  }, [emblaApi, onSelect])\r\n\r\n  useEffect(() => {\r\n    if (emblaApi) emblaApi.on('reInit', onReinit)\r\n  }, [emblaApi, onReinit])\r\n\r\n  // update theme if prop changes\r\n  useEffect(() => {\r\n    initStyling();\r\n    if (props.iconColor) { setIconColor(props.iconColor) }\r\n    if (props.backgroundColor) { setBackgroundColor(props.backgroundColor) }\r\n\r\n  }, [props.theme, props.iconColor, props.backgroundColor]);\r\n\r\n  useEffect(() => {\r\n    initImages(true, true)\r\n  }, [props.images, props.displayedImages]);\r\n\r\n  const prevValue = usePrevious(open);\r\n  const prevImages: any = usePrevious(images);\r\n\r\n  const areObjectsEqual = (object1, object2) =>\r\n    typeof object1 === 'object' && object1 != null && typeof object2 === 'object' && object2 != null\r\n      && Object.keys(object1).length > 0\r\n      ? Object.keys(object1).length === Object.keys(object2).length\r\n      && Object.keys(object1).every(p => areObjectsEqual(object1[p], object2[p]))\r\n      : object1 === object2;\r\n\r\n  const imagesEqualToPrevious = (images: any) => {\r\n    if (images && prevImages) {\r\n      if ((images && images?.length) != (prevImages && prevImages?.length)) {\r\n        return false;\r\n      }\r\n\r\n      let imgArray;\r\n      if (images.length > prevImages) {\r\n        imgArray = images;\r\n      }\r\n      else {\r\n        imgArray = prevImages\r\n      }\r\n      for (let i = 0; i < imgArray.length; i++) {\r\n        let images_copy = images.slice(0);\r\n        let prevImages_copy = prevImages.slice(0);\r\n\r\n        let image = images_copy[i];\r\n        let prevImage = prevImages_copy[i];\r\n\r\n        if (image[\"loaded\"]) {\r\n          delete image[\"loaded\"]\r\n        }\r\n\r\n        if (prevImage[\"loaded\"]) {\r\n          delete prevImage[\"loaded\"]\r\n        }\r\n\r\n        if (!areObjectsEqual(image, prevImage)) {\r\n          return false;\r\n        }\r\n\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  useEffect(() => {\r\n    let starting_index = 0;\r\n    if (props.startingSlideIndex) {\r\n      starting_index = wrapNums(0, images.length, props.startingSlideIndex);\r\n      setStartingIndex(starting_index)\r\n    }\r\n\r\n    if ((props.open == true) && imagesEqualToPrevious(images) == false && props.startingSlideIndex) {\r\n      if (props.images) {\r\n        setImages(props.images)\r\n      }\r\n      openModalWithSlideNum(starting_index)\r\n    }\r\n\r\n    else if ((props.open && prevValue != true)) {\r\n      if (props.images) {\r\n        setImages(props.images)\r\n      }\r\n\r\n      setIsDisplay(true)\r\n\r\n      openModalWithSlideNum(starting_index)\r\n    }\r\n    else if (props.open == false) {\r\n      setIsDisplay(false)\r\n      closeModal()\r\n    }\r\n  }, [props.open, props.startingSlideIndex, images]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen == true) {\r\n      dispatchOpenEvent()\r\n    }\r\n    else {\r\n      dispatchCloseEvent()\r\n    }\r\n\r\n  }, [isOpen])\r\n\r\n  useEffect(() => {\r\n\r\n    // Error check\r\n    if (props.render) {\r\n      if (!props.images) {\r\n        console.error(\r\n          'Array of images must be passed to `SlideshowLightbox` (with the `images` prop) if using custom render method. '\r\n        )\r\n      }\r\n    }\r\n\r\n\r\n    let isMounted = true\r\n    if (isMounted) initProps()\r\n\r\n    if (coverMode && props.images) {\r\n      if (props.coverImageInLightbox == false) {\r\n        let filterImages = props.images.filter((img) => img.cover != true)\r\n        setImages(filterImages)\r\n      } else {\r\n        setImages(props.images)\r\n      }\r\n    }\r\n\r\n    if (isMounted) {\r\n      initEventListeners()\r\n    }\r\n\r\n    let reducedMotionMediaQuery = checkAndInitReducedMotion()\r\n\r\n    if (displayImgMetadata) {\r\n      setImgAnimation(\"fade\")\r\n    }\r\n\r\n    if (!isInit) {\r\n\r\n      initImages(isMounted, false);\r\n\r\n      if (props.images && isRTL == true) {\r\n        initRTLImages();\r\n      }\r\n    }\r\n\r\n    if (isMounted) initStyling()\r\n\r\n    return () => {\r\n      isMounted = false\r\n      removeEventListeners()\r\n      if (reducedMotionMediaQuery) {\r\n        reducedMotionMediaQuery.removeEventListener(\r\n          'change',\r\n          reducedMotionMediaQuery\r\n        )\r\n      }\r\n\r\n    }\r\n  }, [])\r\n\r\n  return <div className={`${initWrapperClassname()}`}>\r\n      {props.images && props.children && lightboxIdentifier == false\r\n        ? props.children\r\n        : null}\r\n\r\n      {props.images && lightboxIdentifier == false\r\n        ? props.images.map((elem, index) => (\r\n          <img\r\n            className={`${props.imgClassName ? props.imgClassName : ''\r\n              } ${styles.cursorPointer}`}\r\n\r\n            src={!isVideo(index) ? elem.src : elem.thumbnail}\r\n            onClick={() => {\r\n              let img_index\r\n\r\n              if (isRTL) {\r\n                img_index = getRTLIndex(props.images.length, index)\r\n              } else {\r\n                img_index = index\r\n              }\r\n\r\n              openModalWithSlideNum(img_index)\r\n            }}\r\n            key={index}\r\n          />\r\n        ))\r\n        : null}\r\n\r\n      {/* IF Lightbox identifier provided or props.images provided AND props.children */}\r\n      {lightboxIdentifier != false && props.children && coverMode == false\r\n        ? props.children\r\n        : null}\r\n\r\n      {(lightboxIdentifier == false && props.images) || coverMode == true\r\n        ? null\r\n        : // No lightbox identifier provided or no cover mode\r\n        previewImageElems\r\n          .filter((elem) => elem.type == 'img')\r\n          .map((elem, index) => (\r\n            <img\r\n              {...elem.props}\r\n              className={`${elem.props.className ? elem.props.className : ''\r\n                } ${styles.cursorPointer}`}\r\n              onClick={() => {\r\n                let img_index\r\n\r\n                if (isRTL) {\r\n                  img_index = getRTLIndex(previewImageElems.length, index)\r\n                } else {\r\n                  img_index = index\r\n                }\r\n\r\n                openModalWithSlideNum(img_index)\r\n              }}\r\n              key={index}\r\n            />\r\n          ))}\r\n\r\n      {coverMode ? props.children : false}\r\n\r\n      <AnimateSharedLayout type='crossfade'>\r\n\r\n        <AnimatePresence initial={false} exitBeforeEnter={true}>\r\n          {showModal !== false && (\r\n            <Portal>\r\n              <Div100vh>\r\n                <motion.div className={`absolute flex flex-row ${styles.modalContainer}`}\r\n                   initial={\"inactive\"}\r\n                   variants={variants}\r\n                   animate={showModal ? \"active\" : \"inactive\"}\r\n                   exit={\"inactive\"}\r\n                   transition={\r\n                     { duration: \"0.3\" }\r\n                   }\r\n                   onAnimationComplete={() => {\r\n                     let animEntered = !animationEntered;\r\n                     setAnimationEntered(animEntered);\r\n \r\n                     if (animEntered == true) {\r\n                       let prevFocusedElement: any = document.activeElement;\r\n                       setPrevFocusedElem(prevFocusedElement)\r\n \r\n                       document.getElementById(\"lightboxContainer\")?.focus();\r\n                     }\r\n                     else {\r\n                       prevFocusedElem?.focus();\r\n                     }\r\n                     if (emblaApi) emblaApi.reInit()\r\n                   }}\r\n >\r\n                <motion.div\r\n                  className={`${styles.slideshowAnimContainer}`}\r\n                  key='slideshowAnimContainer'\r\n\r\n                  id='slideshowAnim'\r\n                  style={{\r\n                    backgroundColor: backgroundColor,\r\n                    width: lightboxModalWidth,\r\n                  }}\r\n               \r\n                >\r\n                  <div className={`${styles.lightboxContainer}`} id=\"lightboxContainer\" tabIndex={-1} role=\"dialog\"\r\n                    onClick={(e) => { if (modalCloseOption == \"clickOutside\") { checkModalClick(e) } }}>\r\n                    <section\r\n                      className={`${styles.iconsHeader} ${iconColor ? '' : getIconStyle()\r\n                        } imageModal`}\r\n                      style={{ color: iconColor }}\r\n                    >\r\n                      <KeyHandler\r\n                        keyValue={'ArrowLeft'}\r\n                        code={'37'}\r\n                        onKeyHandle={() => {\r\n                          prevSlide()\r\n                        }}\r\n                      />\r\n                      <KeyHandler\r\n                        keyValue={'ArrowRight'}\r\n                        code={'39'}\r\n                        onKeyHandle={() => {\r\n                          nextSlide()\r\n                        }}\r\n                      />\r\n                      <KeyHandler\r\n                        keyValue={'Escape'}\r\n                        code={'27'}\r\n                        onKeyHandle={(event) => {\r\n                          event.preventDefault();\r\n                          event.stopPropagation();\r\n                          if (!isBrowserFullScreen) {\r\n                            closeModal()\r\n                          }\r\n                        }}\r\n                      />\r\n\r\n                      {/* Support for Internet Explorer and Edge key values  */}\r\n                      <KeyHandler\r\n                        keyValue={'Left'}\r\n                        code={'37'}\r\n                        onKeyHandle={() => {\r\n                          prevSlide()\r\n                        }}\r\n                      />\r\n                      <KeyHandler\r\n                        keyValue={'Right'}\r\n                        code={'39'}\r\n                        onKeyHandle={() => {\r\n                          nextSlide()\r\n                        }}\r\n                      />\r\n                      <KeyHandler\r\n                        keyValue={'Esc'}\r\n                        code={'27'}\r\n                        onKeyHandle={(event) => {\r\n                          event.preventDefault();\r\n                          event.stopPropagation();\r\n                          if (!isBrowserFullScreen) {\r\n                            closeModal()\r\n                          }\r\n                        }}\r\n                      />\r\n\r\n                      {showControls == true && (\r\n                        <div className={`${styles.controls}`}>\r\n                          {disableZoom ||\r\n                            displayMagnificationIcons == false ? null :\r\n                            <motion.div>\r\n                              <button onClick={() => {\r\n                                if (enableMagnifyingGlass) {\r\n                                  initMagnifyingGlass()\r\n                                }\r\n                                if (zoomReferences.current[zoomIdx] != null) {\r\n                                  zoomReferences.current[zoomIdx]!.zoomIn()\r\n                                }\r\n                                setZoomedIn(true)\r\n                              }}>\r\n                                <ZoomIn\r\n                                  size={24}\r\n                                  color={iconColor ? iconColor : undefined}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                />\r\n                              </button>\r\n\r\n                            </motion.div>\r\n                          }\r\n\r\n                          {disableZoom ||\r\n                            displayMagnificationIcons == false ? null :\r\n                            <motion.div>\r\n                              <button\r\n                                onClick={() => {\r\n                                  zoomReferences.current[zoomIdx]!.zoomOut();\r\n                                  let scale = zoomReferences.current[zoomIdx]!.state.scale;\r\n\r\n                                  if (scale == 1 || scale == 1.65) {\r\n                                    setZoomedIn(false)\r\n                                  }\r\n\r\n                                }}>\r\n                                <ZoomOut\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n\r\n                                />\r\n                              </button>\r\n\r\n                            </motion.div>\r\n                          }\r\n\r\n                          {displayDownloadBtn() ? (\r\n                            <button\r\n                              onClick={() => {\r\n                                saveImage()\r\n                              }}>\r\n                              <Download\r\n                                size={24}\r\n                                className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                  }`}\r\n                                style={iconColor ? { color: iconColor } : {}}\r\n                                color={iconColor ? iconColor : undefined}\r\n\r\n                              />\r\n                            </button>\r\n\r\n                          ) : null}\r\n\r\n                          {displayFullScreenIcon ? (\r\n                            isBrowserFullScreen ? (\r\n                              <motion.div>\r\n                                <button\r\n                                  onClick={() => {\r\n                                    isBrowserFullScreen\r\n                                      ? exitFullScreen()\r\n                                      : fullScreen()\r\n                                  }}>\r\n                                  <FullscreenExit\r\n                                    size={24}\r\n                                    className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                      }`}\r\n                                    style={iconColor ? { color: iconColor } : {}}\r\n                                    color={iconColor ? iconColor : undefined}\r\n\r\n                                  />\r\n                                </button>\r\n\r\n                              </motion.div>\r\n                            ) : (\r\n                              <motion.div>\r\n                                <button onClick={() => {\r\n                                  isBrowserFullScreen\r\n                                    ? exitFullScreen()\r\n                                    : fullScreen()\r\n                                }}>\r\n                                  <Fullscreen\r\n                                    size={24}\r\n                                    className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                      }`}\r\n                                    style={iconColor ? { color: iconColor } : {}}\r\n                                    color={iconColor ? iconColor : undefined}\r\n\r\n                                  />\r\n                                </button>\r\n\r\n                              </motion.div>\r\n                            )\r\n                          ) : null}\r\n\r\n                          {isMobile && displayImgMetadata ?\r\n                            <motion.div>\r\n                              <button onClick={() => {\r\n                                setShowImgMetadataPanel(!showImgMetadataPanel)\r\n                                setDisplayLoader(false)\r\n                              }}>\r\n                                <InfoCircle\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n                                />\r\n                              </button>\r\n\r\n                            </motion.div> : null}\r\n\r\n                          {displayThumbnailIcon ? (\r\n                            <motion.div>\r\n                              <button\r\n                                onClick={() => {\r\n                                  setShowThumbnails(!showThumbnails)\r\n                                }}>\r\n                                <GridFill\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n\r\n                                />\r\n                              </button>\r\n\r\n                            </motion.div>\r\n                          ) : null}\r\n\r\n                          {shouldDisplayMagnifyingGlassIcon() ? (\r\n                            <motion.div>\r\n                              <button\r\n                                onClick={() => initMagnifyingGlass()}\r\n                              >\r\n                                <Search\r\n                                  size={24}\r\n                                  className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                    }`}\r\n                                  style={iconColor ? { color: iconColor } : {}}\r\n                                  color={iconColor ? iconColor : undefined}\r\n                                />\r\n                              </button>\r\n\r\n                            </motion.div>\r\n                          ) : null}\r\n\r\n                          {shouldDisplaySlideshowIcon() ? (\r\n                            <motion.div className={styles.slideshowPlayBtn}>\r\n                              {isSlideshowPlaying ? (\r\n                                <button onClick={() => {\r\n                                  isSlideshowPlaying\r\n                                    ? stopSlideshow()\r\n                                    : playSlideshow()\r\n                                }}>\r\n                                  <PauseCircleFill\r\n                                    size={24}\r\n                                    className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                      }`}\r\n                                    style={iconColor ? { color: iconColor } : {}}\r\n                                    color={iconColor ? iconColor : undefined}\r\n\r\n                                  />\r\n                                </button>\r\n\r\n                              ) : (\r\n                                <button onClick={() => {\r\n                                  isSlideshowPlaying\r\n                                    ? stopSlideshow()\r\n                                    : playSlideshow()\r\n                                }}>\r\n                                  <PlayCircleFill\r\n                                    size={24}\r\n                                    className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                      }`}\r\n                                    style={iconColor ? { color: iconColor } : {}}\r\n                                    color={iconColor ? iconColor : undefined}\r\n\r\n                                  />\r\n                                </button>\r\n\r\n                              )}\r\n                            </motion.div>\r\n                          ) : null}\r\n\r\n                          {customControlComponent ? <motion.div>{customControlComponent}</motion.div> : null}\r\n                        </div>\r\n                      )}\r\n                      <motion.div className={`${styles.closeIcon} ${props.showControls == false ? styles.mlAuto : \"\"}`}>\r\n                        <button id=\"closeBtn\" className={`${props.showControlsBar == false && props.showControls == false \r\n                        ? styles.closeButtonRounded : styles.closeButton}`}\r\n\r\n                          onClick={() => {\r\n                            closeModal()\r\n                          }}>\r\n                          <XLg\r\n                            id=\"closeIcon\"\r\n                            size={24}\r\n                            className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                              }`}\r\n                            color={iconColor ? iconColor : undefined}\r\n                            style={getCloseIconBtnStyle()}\r\n                          />\r\n                        </button>\r\n\r\n                      </motion.div>\r\n                    </section>\r\n                    {displayArrows() ?\r\n\r\n                      <div>\r\n                        <div\r\n                          className={\r\n                            rightArrowStyle\r\n                              ? `${styles.next1} ${getArrowStyle()} imageModal`\r\n                              : \"imageModal\"\r\n                          }\r\n                          style={rightArrowStyle}\r\n                          onClick={() => {\r\n                            nextSlide()\r\n                          }}\r\n                        >\r\n                          {nextArrowElem ? nextArrowElem :\r\n                            <span className={`${props.rightArrowClassname ? props.rightArrowClassname : \"\"}`}>&#10095;</span>\r\n                          }\r\n                        </div>\r\n                        <div\r\n                          className={\r\n                            leftArrowStyle\r\n                              ? `${styles.prev1} ${getArrowStyle()} imageModal ${displayImgMetadata ? styles.prev1_metadata : \"\"}`\r\n                              : \"imageModal\"\r\n                          }\r\n                          style={leftArrowStyle}\r\n                          onClick={() => {\r\n                            prevSlide()\r\n                          }}\r\n                        >\r\n                          {prevArrowElem ? prevArrowElem :\r\n                            <span className={`${props.leftArrowClassname ? props.leftArrowClassname : \"\"}`}>&#10094;</span>\r\n                          }\r\n                        </div>\r\n                      </div>\r\n                      : null\r\n                    }\r\n\r\n                    <AnimatePresence initial={false} custom={direction}>\r\n\r\n                      <div\r\n                        className={`${styles.slideshowInnerContainerThumbnails\r\n                          } ${styles.embla} ${isImageCaption() && showControlsBar == true ? styles.slideImageAndCaption : ''\r\n                          } \r\n                          ${styles.slideshowInnerContainer}\r\n                          ${props.showControlsBar == false || props.fullScreen\r\n                            ? styles.hideControlsBar\r\n                            : \"\"\r\n                          }\r\n                          ${displayImgMetadata ? styles.slideshowInnerContainer_imgMetadata : \"\"}  `}>\r\n\r\n                        {shouldDisplayMetadataPanel() ?\r\n                          <div className={styles.metadata}\r\n                            style={getMetadataPanelStyle()}>\r\n                            {isLoading ? null :\r\n                              <div className={styles.metadataInnerContainer}>\r\n\r\n                                {getMetadataPanel()}\r\n\r\n                                {isMobile && showImgMetadataPanel ?\r\n                                  <button className={styles.imgMetadataCloseBtn}\r\n                                    onClick={() => {\r\n                                      setShowImgMetadataPanel(false)\r\n                                    }}>\r\n                                    <XLg\r\n                                      size={24}\r\n                                      className={`${styles.lightboxjs_icon} ${iconColor ? '' : getIconStyle()\r\n                                        }`}\r\n                                      color={iconColor ? iconColor : undefined}\r\n                                      style={iconColor ? { color: iconColor } : {}}\r\n                                    />\r\n                                  </button> : null\r\n                                }\r\n                              </div>\r\n                            }\r\n\r\n\r\n                          </div>\r\n                          : null}\r\n                        <div className={`${styles.embla__viewport} \r\n                            ${displayImgMetadata ? styles.embla__container_imgMetadata : \"\"}`}\r\n                          ref={showModal ? emblaRef : null}>\r\n                          <div className={`\r\n                          ${imgAnimation == \"fade\" ? styles.imgfade : \"\"} \r\n                          ${styles.embla__container}\r\n                            ${displayImgMetadata ? styles.embla__container_imgMetadata : \"\"}`}>\r\n\r\n                            {regularImgPaneNodes}\r\n\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {displayLoader == true && !isHTMLVideo(slideIndex) ? (\r\n                        <span\r\n                          key='loader'\r\n                          className={`${styles.loader\r\n                            } ${getLoaderThemeClass()}`}\r\n                        ></span>\r\n                      ) : null}\r\n                    </AnimatePresence>\r\n\r\n                    <div\r\n                      className={`${styles.thumbnailsOuterContainer} ${isImageCaption() ? styles.thumbnailsAndCaption : ''}\r\n                      ${displayImgMetadata ? styles.thumbnailsOuterContainer_metadata : \"\"} `}\r\n                      style={\r\n                        getThumbnailsOuterContainerStyle()\r\n                      }\r\n                    >\r\n                      {isImageCaption() ? (\r\n                        <div className={`${styles.imgTitleContainer} imageModal`}>\r\n                          <p\r\n                            className={`${styles.imgTitle}`}\r\n                            key={'imgCaption' + slideIndex}\r\n                            style={\r\n                              props.captionStyle\r\n                                ? props.captionStyle\r\n                                : { color: textColor }\r\n                            }\r\n                          >\r\n                            {getImageCaption()}\r\n                          </p>\r\n                        </div>\r\n                      ) : null}\r\n\r\n                      <AnimatePresence initial={animatedThumbnails}>\r\n                        {showThumbnails !== false && navigationDots !== true && (\r\n                          <motion.div\r\n                            initial={'hidden'}\r\n                            exit={'hidden'}\r\n                            animate={'visible'}\r\n                            style={\r\n                              imagesLoaded ? {} : { display: 'displayHidden' }\r\n                            }\r\n                            transition={{\r\n                              type: 'spring',\r\n                              duration: 0.75\r\n                            }}\r\n                            variants={thumbnailVariants}\r\n                            className={`${styles.thumbnails} ${isImageCaption()\r\n                              ? styles.thumbnailsWithCaption\r\n                              : ''\r\n                              }`}\r\n                          >\r\n                            <div className={`${styles.embla_thumbs} ${styles.thumbnails}`}>\r\n                              <div className={styles.embla_thumbs__viewport} ref={emblaThumbsRef}>\r\n                                <div className={styles.embla_thumbs__container}>\r\n                                  {frameworkID == 'next' &&\r\n                                    props.images\r\n                                    ? props.images.map((img, index) => (\r\n                                      getImageThumbnail(img, index, true, props)\r\n                                    ))\r\n                                    : // Not Next.js\r\n                                    images.map((img, index) => (\r\n                                      getImageThumbnail(img, index, false, props)\r\n                                    ))}\r\n\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n\r\n                          </motion.div>\r\n                        )}\r\n\r\n                        {showThumbnails !== true && navigationDots !== false && (\r\n                          <motion.div\r\n                            initial={'hidden'}\r\n                            exit={'hidden'}\r\n                            animate={'visible'}\r\n                            style={\r\n                              imagesLoaded ? {} : { display: 'displayHidden' }\r\n                            }\r\n                            transition={{\r\n                              type: 'spring',\r\n                              duration: 0.75\r\n                            }}\r\n                            variants={thumbnailVariants}\r\n                            className={`${styles.thumbnails} ${isImageCaption()\r\n                              ? styles.thumbnailsWithCaption\r\n                              : ''\r\n                              }`}\r\n                          >\r\n                            <div className={`${styles.embla_thumbs} ${styles.thumbnails}`}>\r\n                              <div className={styles.embla_thumbs__viewport} ref={emblaThumbsRef}>\r\n                                <div className={`${styles.navigationDots} ${styles.embla_thumbs__container} imageModal\r\n                                `}>\r\n                                  {frameworkID == 'next' &&\r\n                                    props.images\r\n                                    ? props.images.map((img, index) => (\r\n                                      getNavigationDot(index)\r\n                                    ))\r\n                                    : // Not Next.js\r\n                                    images.map((img, index) => (\r\n                                      getNavigationDot(index)\r\n                                    ))}\r\n\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </motion.div>\r\n                        )}\r\n                      </AnimatePresence>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n                {rightSidebarComponent}\r\n\r\n                </motion.div>\r\n             \r\n\r\n              </Div100vh>\r\n            </Portal>\r\n          )}\r\n        </AnimatePresence>\r\n      </AnimateSharedLayout>\r\n    </div>\r\n}\r\n)","import React, { useEffect, useState, useRef } from 'react'\r\nimport { SlideshowLightbox } from './SlideshowLightbox';\r\nimport { ReactNode } from 'react';\r\n\r\nconst themes: any = {\r\n  day: {\r\n    background: 'white',\r\n    iconColor: 'black',\r\n    thumbnailBorder: 'solid transparent 2px',\r\n    textColor: 'black'\r\n  },\r\n  night: {\r\n    background: '#151515',\r\n    iconColor: 'silver',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206)  2px',\r\n    textColor: 'silver'\r\n  },\r\n  lightbox: {\r\n    background: 'rgba(12, 12, 12, 0.93)',\r\n    iconColor: 'silver',\r\n    thumbnailBorder: 'solid rgb(107, 133, 206) 2px',\r\n    textColor: 'silver'\r\n  }\r\n}\r\nconst defaultTheme = \"lightbox\";\r\n\r\n\r\nexport interface AnimImageProps {\r\n  children?: ReactNode;\r\n  ref?: any;\r\n  fullScreen?: boolean;\r\n  backgroundColor?: string;\r\n  theme?: string;\r\n  iconColor?: any;\r\n  modalClose?: string;\r\n  image?: any;\r\n  roundedImages?: boolean;\r\n  disableImageZoom?: boolean;\r\n  showFullScreenIcon?: boolean;\r\n  showMagnificationIcons?: boolean;\r\n  showControls?: boolean;\r\n  downloadImages?: boolean;\r\n  rtl?: boolean;\r\n  width?: number | null;\r\n  height?: number | null;\r\n  framework?: string;\r\n  lightboxIdentifier?: string;\r\n  images?: any;\r\n  lightboxImgClass?: string;\r\n  wrapperClassName?: string;\r\n  className?: string;\r\n}\r\n\r\n\r\nexport const AnimImage: React.FC<AnimImageProps> = (props) => {\r\n  const [backgroundColor, setBackgroundColor] = useState(props.backgroundColor ? props.backgroundColor : themes[defaultTheme].background);\r\n\r\n  const [iconColor, setIconColor] = useState(props.iconColor ? props.iconColor : themes[defaultTheme].iconColor);\r\n\r\n  const [fullScreen, setFullScreen] = useState(props.fullScreen ? props.fullScreen : false);\r\n\r\n  const [modalCloseOption, setModalCloseOption] = useState(props.modalClose ? props.modalClose : \"default\");\r\n\r\n  const [disableZoom, setDisableZoom] = useState(\r\n    props.disableImageZoom ? props.disableImageZoom : false\r\n  )\r\n\r\n  const [imageRoundedBorder, setImageRoundedBorder] = useState(\r\n    props.roundedImages ? props.roundedImages : false\r\n  )\r\n\r\n  const [displayFullScreenIcon, setDisplayFullScreenIcon] = useState(\r\n    props.showFullScreenIcon ? props.showFullScreenIcon : true\r\n  )\r\n\r\n  const [className, setClassName] = useState(\r\n    props.className ? props.className : \"\"\r\n  )\r\n\r\n  const [imgWrapperClass, setImgWrapperClass] = useState(\r\n    props.wrapperClassName ? props.wrapperClassName : \"\"\r\n  )\r\n\r\n  const [width, setWidth] = useState(\r\n    props.width ? props.width : null\r\n  )\r\n\r\n  const [height, setHeight] = useState(\r\n    props.height ? props.height : null\r\n  )\r\n\r\n  const [lightboxImgClassName, setLightboxImgClassName] = useState(\r\n    props.lightboxImgClass ? props.lightboxImgClass : \"\"\r\n  )\r\n  \r\n  const [imgClass, setImgClass] = useState(\r\n    props.className ? props.className : \"\"\r\n  )\r\n\r\n  const [displayMagnificationIcons, setDisplayMagnificationIcons] = useState(\r\n    props.showMagnificationIcons ? props.showMagnificationIcons : true\r\n  )\r\n\r\n  const [displayControls, setDisplayControls] = useState(\r\n    props.showControls ? props.showControls : true\r\n  )\r\n\r\n  const [showDownloadBtn, setShowDownloadBtn] = useState(\r\n    props.downloadImages ? props.downloadImages : false\r\n  )\r\n\r\n  const [isRTL, setIsRTL] = useState(props.rtl ? props.rtl : false)\r\n\r\n  const [lightboxIdentifier, setLightboxIdentifier] = useState(\r\n    props.lightboxIdentifier ? props.lightboxIdentifier : \"\"\r\n  )\r\n\r\n  const [frameworkID, setFrameworkID] = useState(\r\n    props.framework ? props.framework : ''\r\n  )\r\n\r\n  const [images, setImages] = useState<any>([])\r\n\r\n  // const [displayLoader, setDisplayLoader] = useState(\r\n  //   props.showLoader ? props.showLoader : false\r\n  // )\r\n\r\n  // const [textColor, setTextColor] = useState(\r\n  //   props.textColor ? props.textColor : themes[defaultTheme].textColor\r\n  // )\r\n\r\n\r\n  const [state, setState] = React.useState();\r\n\r\n  const initProps = () => {\r\n    if (props.showControls != undefined) {\r\n      setDisplayControls(props.showControls)\r\n      setDisableZoom(props.showControls)\r\n      \r\n      if (props.showControls == false) {\r\n          setDisplayMagnificationIcons(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        setBackgroundColor(themes[props.theme].background);\r\n        setIconColor(themes[props.theme].iconColor);\r\n      }\r\n    }\r\n\r\n    if (props.image && images.length == 0 && frameworkID == \"next\") {\r\n      let imgs: any = [];\r\n      imgs.push(props.image) \r\n      setImages(imgs);\r\n    }\r\n    else {\r\n      setImages(null)\r\n    }\r\n\r\n    return () => {\r\n    };\r\n\r\n  }, [state]);\r\n\r\n  const getImage = () => {\r\n    if (frameworkID == \"next\" && props.children != undefined) {\r\n      return props.children\r\n    }\r\n    else if (frameworkID != \"next\") {\r\n      return (\r\n        <img src={props.image? props.image.src : \"\"} \r\n        alt={props.image.title} \r\n        width={width != null ? width : \"100%\"} \r\n        height={height != null ? height : \"100%\"} \r\n        className={`${className}`} />\r\n      )\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let isMounted = true\r\n    if (isMounted) initProps()\r\n\r\n    return () => {\r\n      isMounted = false\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <SlideshowLightbox\r\n      showSlideshowIcon={false} \r\n      showThumbnails={false}\r\n      backgroundColor={backgroundColor} \r\n      iconColor={iconColor} \r\n      theme={props.theme} \r\n      lightboxIdentifier={lightboxIdentifier}\r\n      fullScreen={fullScreen} \r\n      showMagnificationIcons={displayMagnificationIcons}\r\n      showFullScreenIcon={displayFullScreenIcon} \r\n      downloadImages={showDownloadBtn}\r\n      roundedImages={imageRoundedBorder} \r\n      disableImageZoom={disableZoom}\r\n      showArrows={false} \r\n      showThumbnailIcon={false} \r\n      showControls={displayControls}\r\n      modalClose={modalCloseOption}\r\n      lightboxImgClass={lightboxImgClassName}\r\n      imgClassName={imgClass}\r\n      imageComponent={true}\r\n      framework={frameworkID}\r\n      // className={className}\r\n      imgWrapperClassName={imgWrapperClass}\r\n      images={images}>\r\n\r\n      {getImage()}\r\n    \r\n    </SlideshowLightbox>\r\n  );\r\n\r\n}","import * as React from 'react'\nimport { useState, useEffect, useRef } from 'react'\nimport { motion, AnimatePresence, AnimateSharedLayout } from 'framer-motion'\nimport styles from './styles.module.css'\nimport axios from \"axios\";\nimport {\n  wrapNums,\n  getVideoHeight,\n  getVideoWidth,\n  shouldAutoplay,\n  openFullScreen,\n  closeFullScreen,\n} from './utility'\nimport {SlideshowLightbox} from \"./SlideshowLightbox\"\nimport {AnimImage} from \"./AnimImage\"\n\nexport const initLightboxJS = (licenseKey: string, plan_type: string) => {\n  var body = {\n    license_key: licenseKey,\n    plan_type: plan_type,\n  };\n\n  axios.post('https://lightboxjs-server.herokuapp.com/license', body)\n    .then(function (response) {\n\n      let licenseKeyValid = response.data.license_valid;\n\n      if (!licenseKeyValid) {\n        console.warn(\"Lightbox.js: Invalid license key specified, a valid license key must be provided.\")\n      }\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n\n};\n\n\nexport { SlideshowLightbox, AnimImage as Image }"],"names":["wrapNums","minNum","maxNum","v","rangeSize","shouldAutoplay","elem","type","autoPlay","getVideoHeight","videoHeight","getVideoWidth","videoWidth","getScale","num","maxScale","thumbnailVariants","visible","opacity","y","hidden","themes","day","background","iconColor","thumbnailBorder","textColor","metadataTextColor","night","lightbox","inactiveThumbnailBorder","defaultTheme","mobileWidth","usePrevious","value","ref","useRef","useEffect","current","SlideshowLightbox","React","props","useImperativeHandle","reset","initImages","_useState","useState","_useState$","imgSlideIndex","direction","setImgSlideIndex","_useState2","showModal","setShowModal","_useState3","slideDuration","slideAnimDuration","_useState4","isSlideshowPlaying","setIsSlideshowPlaying","_useState5","emblaReinitialized","setEmblaReinitialized","_useState6","images","setImages","_useState7","previewImageElems","setPreviewImageElems","slideIndex","length","_useState8","loop","startIndex","active","duration","dragThreshold","skipSnaps","reactSwipeOptions","setReactSwipeOptions","initialThumbnailOptions","containScroll","dragFree","_useState9","width","setWidth","isMobile","_useState10","thumbnailSwipeOptions","setThumbnailSwipeOptions","_useState11","carouselReady","setCarouselReady","_useState12","zoomedIn","setZoomedIn","_useState13","isDisplay","setIsDisplay","_useState14","isOpen","setIsOpen","_useState15","prevFocusedElem","setPrevFocusedElem","_useState16","animationEntered","setAnimationEntered","_useState17","lightboxWidth","lightboxModalWidth","_useState18","rightSidebarComponent","_useState19","magnifyingGlass","magnifyingGlassFeature","_useState20","disableImageZoom","disableZoom","setDisableZoom","_useState21","slideshowInterval","_useState22","rightArrowStyle","_useState23","leftArrowStyle","_useState24","maxZoomScale","_useState25","roundedImages","isRounded","setIsRounded","_useState26","showControls","setShowControls","_useState27","showFullScreenIcon","displayFullScreenIcon","setDisplayFullScreenIcon","_useState28","showThumbnailIcon","displayThumbnailIcon","setDisplayThumbnailIcon","_useState29","showSlideshowIcon","displaySlideshowIcon","setDisplaySlideshowIcon","_useState30","showMagnificationIcons","displayMagnificationIcons","setDisplayMagnificationIcons","_useState31","nextArrow","nextArrowElem","_useState32","imageComponent","isImageComponent","_useState33","prevArrow","prevArrowElem","_useState34","modalClose","modalCloseOption","_useState35","downloadImages","showDownloadBtn","_useState36","showNavigationDots","navigationDots","_useState37","metadataTimeLocale","metadataLocale","_useState38","rtl","isRTL","_useState39","framework","frameworkID","_useState40","lightboxIdentifier","_useState41","fullScreen","imageFullScreen","_useState42","licenseKey","_useState43","showLoader","displayLoader","setDisplayLoader","_useState44","controlComponent","customControlComponent","_useState45","startingSlideIndex","startingIndex","setStartingIndex","_useState46","backgroundColor","setBackgroundColor","_useState47","setIconColor","_useState48","setTextColor","_useState49","showControlsBar","_useState50","useCoverMode","coverMode","_useState51","displayMetadata","displayImgMetadata","_useState52","showImgMetadataPanel","setShowImgMetadataPanel","_useState53","imgMetadata","setImgMetadata","_useState54","showThumbnails","setShowThumbnails","_useState55","animateThumbnails","animatedThumbnails","_useState56","imgAnimation","setImgAnimation","_useState57","arrowStyle","_useState58","YTVideoCurrentlyPlaying","setYTVideoCurrentlyPlaying","_useState59","isBrowserFullScreen","setIsBrowserFullScreen","_useState60","enableMagnifyingGlass","setMagnifyingGlass","_useState61","imagesLoaded","setImagesLoaded","imageRef","_useState62","zoomIdx","setZoomIdx","_useState63","imgContainHeight","setImgContainHeight","_useState64","imgContainWidth","setImgContainWidth","_useState65","isInit","setIsInit","open","previousValues","zoomReferences","videoReferences","btnRef","_useState66","videoElements","setVideoElements","_useState67","isLoading","setIsLoading","_useState68","noWindow","_useState69","touchStart","setTouchStart","_useState70","touchEnd","setTouchEnd","_useState71","mouseStartX","setMouseStartX","_useState72","mouseStartY","setMouseStartY","minimumSwipeDistance","onTouchStart","e","targetTouches","clientX","onTouchMove","onTouchEnd","distance","isLeftSwipe","isRightSwipe","nextSlide","prevSlide","delta","onMouseDown","event","pageX","pageY","onMouseUp","differenceX","Math","abs","isLeftDragMotion","isRightDragMotion","createCustomThumbnailBorder","_useState73","_useEmblaCarousel","useEmblaCarousel","emblaRef","emblaApi","_useEmblaCarousel2","emblaThumbsRef","emblaThumbsApi","getLoaderThemeClass","theme","styles","night_loader","day_loader","scrollPrev","useCallback","scrollNext","variants","inactive","isImageCaption","_props$images$slideIn","caption","displayDownloadBtn","isVideo","handleWindowResize","window","innerWidth","shouldDisplayMagnifyingGlassIcon","getImageStyle","styleObject","shouldDisplaySlideshowIcon","undefined","navigationClick","index","initLoader","setCurrentSlide","checkModalClick","modals","document","getElementsByClassName","arr_modals","Array","from","i","clickInside","contains","target","closeModal","getRTLIndex","img_gallery_length","getMetadataTextColor","getElementById","openFullScreen","initFullScreenChangeEventListeners","exitFullScreenHandler","closeFullScreen","removeFullScreenChangeEventListeners","exitFullScreen","emblaSlideSelect","on","updateImageSlideshow","newDirection","displayArrows","showArrows","newIndex","loaded","getImageCaption","getArrowStyle","dark_icon","light_icon","getIconStyle","dark_header_icon","light_header_icon","scrollTo","dispatchOpenEvent","onOpen","onSelect","dispatchCloseEvent","onClose","dispatchNextImgEvent","onNext","dispatchPrevImgEvent","onPrev","focus","openModal","reInit","selectedScrollSnap","setItemLoaded","map","img","_extends","setImagesItemLoaded","resetMedia","slide_index","resetVideo","resetImage","initImgMetadataPanel","initSlide","newSlideIndex","wrap_slide_index","setThumbnailStartIndex","thumbnailSwipeOptionConfig","openModalWithSlideNum","reactSwipeOptionConfig","saveImage","original","saveAs","src","playSlideshow","stopSlideshow","getEmbedIndex","elems","iframe_index","item","getEmblaClass","embla__slide_grid","imgfade","embla__slide","embla__slide_selected","pause","pauseVideo","lightboxjs_elem","querySelectorAll","iframe_elem_index","iframe","iframe_src","getNavigationDot","style","className","navigationDot","onClick","getThumbnailsOuterContainerStyle","getImageThumbnail","isNextJS","key","embla_thumbs__slide","thumbnailImgClass","thumbnail","getThumbnailImgSrcNext","getThumbnailImgSrc","alt","onLoad","border","onThumbnailClick","handleError","onImgError","initMagnifyingGlass","resetTransform","thumbnailSrc","img_src","isArray","isAnimImageComponent","initWrapperClassname","classNameStr","imgWrapperClassName","lightboxjs","initStyling","getMetadataPanel","imgMetadataItem","element","metadataPanel","name","createDate","toString","height","isoData","fNumber","shutterSpeed","imageSlideElement","imageElem","imgElemClassname","lightbox_img","maxWidthFull","maxWidthWithoutMagnifier","contain_img","loading","onError","id","render","imgSlide","img_link","_images$index$src","coverImageInLightbox","getCloseIconBtnStyle","style_object","color","closeIconBtnStyle","closeIconBtnStyleKeys","Object","keys","keyName","style_obj","isPanningDisabled","getImageFilename","img_src_split","split","parseCreateDate","js_date","date","getDate","month","getMonth","year","getFullYear","time","toLocaleTimeString","getLightboxElem","isCustomEmbed","customEmbedElement","videoSlideElement","isPictureElement","elem_metadata","format","srcSet","error","img_target","individual_image_metadata","exifr","parse","then","exif","ISO","CreateDate","ExifImageHeight","ExifImageWidth","ShutterSpeedValue","imgMetadataItems","shouldDisplayMetadataPanel","picture","internalEngine","translate","toggleActive","isHTMLVideo","videoElem","videoOuterContainer","YouTube","videoId","videoID","el","iframeClassName","ytVideo","title","opts","playerVars","autoplay","onReady","videoElems","onPlay","onPause","onEnd","onStateChange","onPlaybackRateChange","onPlaybackQualityChange","htmlVideo","htmlVideoOuterContainer","cursorPointer","lightboxVideo","controls","videoSrc","customVideoContainer","embed","customElem","customEmbedContainer","initZoom","state","scale","regularImgPaneNodes","apply","_","Magnifier","magnifyWrapper","mgShowOverflow","TransformWrapper","onWheel","wheelEvent","disabled","panning","onZoom","onZoomStop","onTransformed","onPinchingStop","centerZoomedOut","initialScale","alignmentAnimation","sizeX","sizeY","TransformComponent","wrapperClass","react_transform_wrapper","contentClass","react_transform_component","wrapperStyle","maxWidth","margin","contentStyle","display","slideshow_img","lightboxImgClass","slideshow_img_metadata","initImageDimensions","getMetadataPanelStyle","ratio","naturalWidth","naturalHeight","addEventListener","removeEventListener","initEventListeners","isBrowser","removeEventListeners","removeOnSelectListener","setReducedMotion","mediaQuery","matches","checkAndInitReducedMotion","reducedMotionMediaQuery","_reducedMotionMediaQu","matchMedia","addListener","initPropsForControlIcons","initProps","useInterval","lightbox_elem","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","msExitFullscreen","initRTLImages","imagesMetadataCopy","reverse","imagesRTLCopy","initAndOpenLightbox","img_gallery","isMounted","updateImages","filterImages","filter","cover","children","queryElems","k","elemSelector","forEach","push","img_elements","_loop","classList","add","href","originalImageAttr","_loop2","_i","attr_val","getAttribute","original_img_src","tagName","corresponding_img_item","img_alt","showAllImages","imgArray","imgs","img_elem","img_obj","dispatchSlideSelectEvents","prevIndex","prevSlideIndex","previousScrollSnap","onReinit","handleResize","entry","rootNode","useResizeObserver","off","watchDrag","displayedImages","prevValue","prevImages","areObjectsEqual","object1","object2","every","p","imagesEqualToPrevious","images_copy","slice","prevImages_copy","image","prevImage","starting_index","console","imgClassName","img_index","AnimateSharedLayout","AnimatePresence","initial","exitBeforeEnter","Portal","Div100vh","motion","div","modalContainer","animate","exit","transition","onAnimationComplete","animEntered","_document$getElementB","prevFocusedElement","activeElement","slideshowAnimContainer","lightboxContainer","tabIndex","role","iconsHeader","KeyHandler","keyValue","code","onKeyHandle","preventDefault","stopPropagation","zoomIn","ZoomIn","size","lightboxjs_icon","zoomOut","ZoomOut","Download","FullscreenExit","Fullscreen","InfoCircle","GridFill","Search","slideshowPlayBtn","PauseCircleFill","PlayCircleFill","closeIcon","mlAuto","closeButtonRounded","closeButton","XLg","next1","rightArrowClassname","prev1","prev1_metadata","leftArrowClassname","custom","slideshowInnerContainerThumbnails","embla","slideImageAndCaption","slideshowInnerContainer","hideControlsBar","slideshowInnerContainer_imgMetadata","metadata","metadataInnerContainer","imgMetadataCloseBtn","embla__viewport","embla__container_imgMetadata","embla__container","loader","thumbnailsOuterContainer","thumbnailsAndCaption","thumbnailsOuterContainer_metadata","imgTitleContainer","imgTitle","captionStyle","thumbnails","thumbnailsWithCaption","embla_thumbs","embla_thumbs__viewport","embla_thumbs__container","AnimImage","imageRoundedBorder","wrapperClassName","imgWrapperClass","lightboxImgClassName","imgClass","displayControls","setDisplayControls","_React$useState","getImage","initLightboxJS","plan_type","body","license_key","axios","post","response","licenseKeyValid","data","license_valid","warn","log"],"mappings":"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"}